<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å¤ç° A Tutorial on Linear and Differential Cryptanalysisä¸­å·®åˆ†åˆ†æçš„ä¾‹å­</title>
      <link href="posts/differentialcryptanalysis.html"/>
      <url>posts/differentialcryptanalysis.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é»‘å†å²++<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://s2.loli.net/2022/09/23/uRJw5VFbSkvoGXD.png" alt="image-20220923181746324"></p><h2 id="å·®åˆ†åˆ†æ"><a href="#å·®åˆ†åˆ†æ" class="headerlink" title="å·®åˆ†åˆ†æ"></a>å·®åˆ†åˆ†æ</h2><p>ä»€ä¹ˆæ˜¯å·®åˆ†åˆ†æå‘¢ï¼Ÿå…¶å®ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è€ƒå¯Ÿæ˜æ–‡çš„æŸä¸€æˆ–æŸäº›ä½å–åå¯¹å¯†æ–‡çš„å½±å“ï¼Œæ‰€ä»¥è¿™é‡Œçš„å·®åˆ†ï¼Œå®è´¨å°±æ˜¯å¼‚æˆ–çš„æ„æ€ã€‚å…¶å®æ„Ÿè§‰å·®åˆ†åˆ†æçš„è¿‡ç¨‹å’Œçº¿æ€§åˆ†ææ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¿™ä¸ªåšå®¢æˆ‘å°±å†™ç®€å•ä¸€ç‚¹ï¼Œå®åœ¨è®°ä¸ä½äº†è¿˜å¯ä»¥ç¿»é˜…<a href="https://toby-shi-cloud.github.io/posts/linearcryptanalysis.html">ä¸Šä¸€ç¯‡åšå®¢</a>ã€‚è™½ç„¶ä¸Šä¸€ç¯‡ä¹Ÿä¸æ€ä¹ˆè¯¦ç»†ï¼ˆï¼‰</p><h2 id="Sboxæ‹Ÿåˆ"><a href="#Sboxæ‹Ÿåˆ" class="headerlink" title="Sboxæ‹Ÿåˆ"></a>Sboxæ‹Ÿåˆ</h2><p>ä¸çº¿æ€§åˆ†æä¸€è‡´ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¯¹sboxè¿›è¡Œæ‹Ÿåˆã€‚åŒæ ·çš„ï¼Œå¯¹äºè¾“å…¥çš„æ¯ä¸€ç§å¯èƒ½çš„å·®åˆ†ï¼Œæˆ‘ä»¬ç©·ä¸¾æ‰€æœ‰çš„è¾“å…¥1ï¼ˆè¾“å…¥2=è¾“å…¥1$\oplus$è¾“å…¥å·®åˆ†ï¼‰å¹¶è®°å½•ç”±æ­¤å¸¦æ¥çš„è¾“å‡ºå·®åˆ†å€¼ï¼ˆè¾“å‡ºå·®åˆ†=è¾“å‡º1$\oplus$è¾“å‡º2ï¼‰ï¼Œè®¡ç®—å‡ºè¾“å…¥å·®åˆ†å’Œè¾“å‡ºå·®åˆ†å¯¹åº”çš„æ¦‚ç‡å…³ç³»ã€‚é€šè¿‡16*16çš„256æ¬¡è®¡ç®—ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ•´ç†å‡ºä¸€å¼ sboxçš„æ‹Ÿåˆè¡¨æ ¼ã€‚</p><h2 id="å­å¯†é’¥åˆ†æ"><a href="#å­å¯†é’¥åˆ†æ" class="headerlink" title="å­å¯†é’¥åˆ†æ"></a>å­å¯†é’¥åˆ†æ</h2><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬é€‰å–æ¦‚ç‡è¾ƒå¤§çš„è·¯å¾„ï¼Œå¯ä»¥å¾—åˆ°æ˜æ–‡å¯¹çš„ä¸€ä¸ªå·®åˆ†å’Œä¸€ä¸ªå€’æ•°ç¬¬äºŒè½®è¾“å‡ºçš„å·®åˆ†ä¹‹é—´çš„æ¦‚ç‡ï¼Œåœ¨è®ºæ–‡ä¸­ï¼Œé€‰å–çš„æ˜¯$\Delta P  = [0000\ 1011\ 0000\ 0000]$å’Œ$\Delta U4 = [0000\ 0110\ 0000\ 0110]$ï¼Œæ¦‚ç‡æ˜¯$\frac{27}{1024}=0.0264$ã€‚</p><p>åŒæ ·çš„æˆ‘ä»¬ç©·ä¸¾æœ€åä¸€è½®ç›¸å…³è”çš„å¯†é’¥$k_2$å’Œ$k_4$ï¼Œé€šè¿‡å€’æ¨å¾—åˆ°$U4$ï¼Œæœ€åè®¡ç®—å‡ºå½“$\Delta P$æˆç«‹æ—¶$\Delta U4$æˆç«‹çš„æ¦‚ç‡å³å¯ã€‚</p><p>ç”±äºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯é«˜æ¦‚ç‡è·¯å¾„ï¼Œæ‰€ä»¥æœ€åæˆç«‹æ¦‚ç‡æœ€é«˜çš„å¯†é’¥å°±å¤§æ¦‚ç‡æ˜¯æˆ‘ä»¬è¦æ‰¾çš„å¯†é’¥ã€‚</p><h3 id="å¤ç°ç»“æœ"><a href="#å¤ç°ç»“æœ" class="headerlink" title="å¤ç°ç»“æœ"></a>å¤ç°ç»“æœ</h3><p><img src="https://s2.loli.net/2022/09/23/UK4adYCN6ZJyBws.png" alt="image-20220923183946970"></p><p>å…¶ä¸­å­å¯†é’¥ç”¨16è¿›åˆ¶è¡¨ç¤ºï¼Œxè¡¨ç¤ºæœªçŸ¥ï¼ˆå³å’Œä¾‹å­çš„è·¯å¾„æ— å…³ï¼‰ã€‚</p><p>å¯è§$k_2=2$ä¸”$k_4=4$çš„æ¦‚ç‡è¿œè¶…å…¶ä»–å¯†é’¥ç»„åˆï¼Œè€Œä¸”æ¦‚ç‡$0.0272863$ä¸ç†è®º$\frac{27}{1024}=0.0264$éå¸¸æ¥è¿‘ã€‚</p><h3 id="å¤ç°ä»£ç "><a href="#å¤ç°ä»£ç " class="headerlink" title="å¤ç°ä»£ç "></a>å¤ç°ä»£ç </h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"structure.hh"</span></span><span class="token comment">// \delta P  = [0000 1011 0000 0000]</span><span class="token comment">// \delta U4 = [0000 0110 0000 0110]</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> FileNamePlain <span class="token operator">=</span> <span class="token string">"plaintexts.hex"</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> FileNameCipher <span class="token operator">=</span> <span class="token string">"ciphertexts.hex"</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> FileNameCsv <span class="token operator">=</span> <span class="token string">"diff.csv"</span><span class="token punctuation">;</span>ifstream fp<span class="token punctuation">,</span> fc<span class="token punctuation">;</span>ofstream fcsv<span class="token punctuation">;</span><span class="token keyword">int</span> pcPair<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// use -1 stands for undefined</span><span class="token keyword">const</span> u16 deltaP <span class="token operator">=</span> <span class="token number">0b0000101100000000</span><span class="token punctuation">;</span><span class="token keyword">const</span> u16 deltaU4 <span class="token operator">=</span> <span class="token number">0b0000011000000110</span><span class="token punctuation">;</span><span class="token keyword">inline</span> u16 <span class="token function">getU4</span><span class="token punctuation">(</span>u16 _C<span class="token punctuation">,</span> u16 key<span class="token punctuation">)</span><span class="token punctuation">{</span>    _C <span class="token operator">=</span> <span class="token function">key_mixing</span><span class="token punctuation">(</span>_C<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>    _C <span class="token operator">=</span> <span class="token function">substitution</span><span class="token punctuation">(</span>_C<span class="token punctuation">,</span> SBOX_INV<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> _C<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    fp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>FileNamePlain<span class="token punctuation">,</span> ios<span class="token operator">::</span>binary <span class="token operator">|</span> ios<span class="token operator">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    fc<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>FileNameCipher<span class="token punctuation">,</span> ios<span class="token operator">::</span>binary <span class="token operator">|</span> ios<span class="token operator">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>pcPair<span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> pcPair<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        u16 P<span class="token punctuation">,</span> U<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fp<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fc<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>U<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        P <span class="token operator">=</span> P <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> P <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>        U <span class="token operator">=</span> U <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> U <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">~</span>pcPair<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token punctuation">)</span> num<span class="token operator">++</span><span class="token punctuation">;</span>        pcPair<span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token operator">=</span> U<span class="token punctuation">;</span>        <span class="token comment">// cerr &lt;&lt; hex &lt;&lt; P &lt;&lt; "-&gt;" &lt;&lt; U &lt;&lt; endl;</span>        <span class="token comment">// if(num == 100) break;</span>    <span class="token punctuation">}</span>    cerr <span class="token operator">&lt;&lt;</span>  <span class="token string">"num = "</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// æœ‰æ•ˆæ˜å¯†æ–‡å¯¹ä¸ªæ•°ï¼ˆå‰”é™¤é‡å¤ï¼‰</span>    fp<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fcsv<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>FileNameCsv<span class="token punctuation">,</span> ios<span class="token operator">::</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>    fcsv <span class="token operator">&lt;&lt;</span> <span class="token string">"partial subkey"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"prob"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>u16 k2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k2 <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> k2<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span>u16 k4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k4 <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> k4<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        u16 key <span class="token operator">=</span> k2 <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> k4<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">65536</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>pcPair<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>pcPair<span class="token punctuation">[</span>i<span class="token operator">^</span>deltaP<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token punctuation">(</span>i <span class="token operator">^</span> deltaP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token comment">// cerr &lt;&lt; (!(pcPair[i] == -1) &amp;&amp; !(pcPair[i^deltaP] == -1)) &lt;&lt; endl;</span>            sum<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getU4</span><span class="token punctuation">(</span>pcPair<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token function">getU4</span><span class="token punctuation">(</span>pcPair<span class="token punctuation">[</span>i<span class="token operator">^</span>deltaP<span class="token punctuation">]</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> deltaU4<span class="token punctuation">)</span>                count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">double</span> prob <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> sum<span class="token punctuation">;</span>        fcsv <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> <span class="token string">"x"</span> <span class="token operator">&lt;&lt;</span> k2 <span class="token operator">&lt;&lt;</span> <span class="token string">"x"</span> <span class="token operator">&lt;&lt;</span> k4 <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> dec <span class="token operator">&lt;&lt;</span> prob <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>k2 <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>k4<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"sum = "</span> <span class="token operator">&lt;&lt;</span> sum <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// æœ‰æ•ˆæ˜å¯†æ–‡å¯¹ç»„çš„ç»„æ•°ï¼ˆå‰”é™¤æ²¡æœ‰é…å¯¹æˆç»„çš„ï¼‰</span>    <span class="token punctuation">}</span>    fcsv<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>structure.hh</code>æ˜¯æˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯åŠ å¯†è§£å¯†éœ€è¦ç”¨åˆ°çš„å‡½æ•°ä»¥åŠSboxå’Œpermutationè¿çº¿çš„æ–¹å¼ã€‚ç”±äºåŠ å¯†è§£å¯†ä»¥åŠåˆ†æéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å‡½æ•°ï¼Œæ‰€ä»¥å°±æ”¾åœ¨å¤´æ–‡ä»¶é‡Œé¢äº†ã€‚</p><p>ç”¨cppçš„åŸå› æ˜¯ï¼Œbluebeenå‘Šè¯‰æˆ‘cppæ¯”pythonå¿«æ•°åå€â€¦â€¦pythonåˆ†æ10ä¸‡ç»„æ˜å¯†æ–‡å¯¹è¦1åˆ†é’ŸçœŸçš„éš¾å—â€¦â€¦</p><p>å› ä¸ºå·®åˆ†åˆ†æéœ€è¦ç¬¦åˆè¦æ±‚çš„æ˜å¯†æ–‡å¯¹ç»„ï¼Œå³æ˜æ–‡éœ€è¦æ»¡è¶³$\Delta P$çš„é‚£ä¸ªå¼å­ã€‚æ‰€ä»¥æ˜¯å…ˆæŠŠæ¶‰åŠåˆ°çš„æ˜å¯†æ–‡å¯¹å­˜ä¸‹æ¥ï¼ˆä»£ç é‡Œé¢æ˜¯<code>pcPair</code>ï¼‰ç„¶ååœ¨è¿›è¡Œç»Ÿè®¡ã€‚</p><p>åœ¨è¿›è¡Œå·®åˆ†åˆ†æçš„å¤ç°çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè®ºæ–‡ä¸Šåªç”¨äº†1ä¸‡å¯¹æ˜å¯†æ–‡å¯¹ï¼Œè€Œæˆ‘ç”¨äº†10ä¸‡å¯¹æ‰èƒ½æ‰¾å‡ºç­”æ¡ˆå—ï¼Ÿæˆ‘çš„å¤ç°ç©¶ç«Ÿæ˜¯å‡ºäº†ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>å…¶å®åœ¨ä¸Šé¢çš„å¤ç°ä»£ç ä¸­ï¼Œè¾“å‡º<code>num</code>å’Œ<code>sum</code>å°±å·²ç»æ­æ™“äº†ç­”æ¡ˆã€‚æ ¹æ®è¾“å‡ºï¼Œæˆ‘çš„10ä¸‡å¯¹æ˜å¯†æ–‡ï¼Œåªæœ‰<code>num</code>=5ä¸‡çš„æœ‰æ•ˆæ˜å¯†æ–‡å¯¹ï¼Œç„¶åå†å®‰è£…$\Delta P$çš„è¦æ±‚é…å¯¹åï¼Œåªæœ‰<code>sum</code>=2ä¸‡ç»„ã€‚è€Œè®ºæ–‡ç›´æ¥è¯´çš„å°±æ˜¯1ä¸‡ç»„æ»¡è¶³$\Delta P$çš„æ˜å¯†æ–‡ç»„ã€‚å…¶å®æˆ‘ä¹Ÿå°±ç”¨äº†ä¸¤å€çš„æ•°æ®è€Œå·²ã€‚æ‰€ä»¥æˆ‘çš„æ•°æ®çœ‹èµ·æ¥æ¯”è®ºæ–‡ä¸­è¦ç²¾ç¡®ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰ç²¾ç¡®å¤ªå¤šã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>[1]Heys,  Howard M . A Tutorial on Linear and Differential Cryptanalysis[J]. Cryptologia, 2002, 26(3):189-221.</p>]]></content>
      
      
      <categories>
          
          <category> å¯†ç å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> å¯†ç åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤ç° A Tutorial on Linear and Differential Cryptanalysisä¸­çº¿æ€§åˆ†æçš„ä¾‹å­</title>
      <link href="posts/linearcryptanalysis.html"/>
      <url>posts/linearcryptanalysis.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™å­¦æœŸé€‰äº†ä¸€é—¨ç½‘å®‰çš„ç§‘ç ”è¯¾å ‚ã€‚ç¬¬ä¸€èŠ‚è¯¾å°±ç»™äº†æˆ‘ä¸€ä¸ªä¸‹é©¬å¨ï¼Œç›´æ¥é˜…è¯»å…¨è‹±è®ºæ–‡ã€‚å¥½åœ¨æˆ‘å€ŸåŠ©ç¿»è¯‘è¯»äº†ä¸€éåï¼Œåˆå¬æ•™æˆå’ŒåŒå­¦ä»¬è®²äº†ä¸€æ¬¡ï¼Œæ€»ç®—æ˜¯æŠŠ33é¡µè®ºæ–‡çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯Linear Cryptanalysisç†è§£å®Œäº†ã€‚</p><p>å½“ç„¶ç†è§£å½’ä¸€å›äº‹å„¿ï¼Œå®ç°æ˜¯å¦ä¸€å›äº‹ï¼Œæ‰€ä»¥æ˜¨å¤©æ™šä¸Šï¼ˆä¹Ÿå°±æ˜¯9æœˆ13æ—¥ä¸‹åˆï¼‰ï¼Œæˆ‘å°±æŠŠè®ºæ–‡ä¸­çš„ä¾‹å­åŸºæœ¬å¤ç°å‡ºæ¥äº†ã€‚</p><h2 id="åˆ†ç»„å¯†ç "><a href="#åˆ†ç»„å¯†ç " class="headerlink" title="åˆ†ç»„å¯†ç "></a>åˆ†ç»„å¯†ç </h2><p>ä»€ä¹ˆæ˜¯åˆ†ç»„å¯†ç ï¼Ÿç®€è€Œè¨€ä¹‹å°±æ˜¯æŠŠæ•°æ®åˆ†ç»„ï¼Œä¸€ç»„ä¸€ç»„çš„åŠ å¯†ã€‚è®ºæ–‡ä¸­çš„ä¾‹å­æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åˆ†ç»„åŠ å¯†ï¼Œæ•°æ®æ¯16bitä¸ºä¸€ç»„ï¼Œé‡‡ç”¨çš„æ˜¯SPNç»“æ„ï¼ˆå³Substitution-Permutation Networkï¼‰ã€‚è¿™ä¸ªåŠ å¯†ä¼šç»è¿‡è‹¥å¹²è½®ï¼Œæ¯è½®æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š</p><h3 id="Substitution-ç½®æ¢"><a href="#Substitution-ç½®æ¢" class="headerlink" title="Substitution ç½®æ¢"></a>Substitution ç½®æ¢</h3><p>æˆ‘ä»¬æŠŠ16bitæ•°æ®åˆ†æˆ4bitä¸€ç»„ï¼Œä¸€å…±4ç»„ã€‚å°†æ¯ç»„çš„4bitçš„å€¼ä¼ å…¥å¯¹åº”S-boxä¸­ï¼ŒS-boxä¹Ÿä¼šä¼ å‡ºä¸€ä¸ª4bitçš„å€¼ã€‚æ¯ä¸ªS-boxçš„é€»è¾‘éƒ½å¯ä»¥æŸ¥è¡¨å¾—åˆ°ã€‚é€šå¸¸4ä¸ªS-boxåº”å½“ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä½œä¸ºä¾‹å­ï¼Œè®ºæ–‡ä¸­é€‰å–äº†åŒæ ·çš„S-boxã€‚å…¶æ˜ å°„è¡¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th>input</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th></tr></thead><tbody><tr><td>output</td><td>E</td><td>4</td><td>D</td><td>1</td><td>2</td><td>F</td><td>B</td><td>8</td><td>3</td><td>A</td><td>6</td><td>C</td><td>5</td><td>9</td><td>0</td><td>7</td></tr></tbody></table><p>ä¸Šè¡¨ä»¥16è¿›åˆ¶æ•°è¡¨ç¤º4bitçš„å€¼ã€‚</p><h3 id="Permutation-æ’åˆ—"><a href="#Permutation-æ’åˆ—" class="headerlink" title="Permutation æ’åˆ—"></a>Permutation æ’åˆ—</h3><p>æ’åˆ—å°±æ˜¯ä¸€ä¸ªè¿çº¿çš„æ“ä½œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ç§æ˜ å°„ã€‚æœ¬æ­¥éª¤çš„è¾“å‡ºå°±æ˜¯è¾“å…¥çš„ä¸€ç§æ’åˆ—ã€‚ä¸‹è¡¨æ˜¯ä¾‹å­é€‰ç”¨çš„æ’åˆ—ï¼š</p><table><thead><tr><th>input</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th></tr></thead><tbody><tr><td>output</td><td>1</td><td>5</td><td>9</td><td>13</td><td>2</td><td>6</td><td>10</td><td>14</td><td>3</td><td>7</td><td>11</td><td>15</td><td>4</td><td>8</td><td>12</td><td>16</td></tr></tbody></table><p>ä¸Šè¡¨ä¸­<code>input=3, output=9</code>è¡¨ç¤ºè¾“å‡ºä¸­ç¬¬9æ¯”ç‰¹çš„å€¼æ¥è‡ªè¾“å…¥ä¸­ç¬¬3æ¯”ç‰¹çš„å€¼ã€‚</p><h3 id="Key-Mixing-å¯†é’¥åŠ å¯†"><a href="#Key-Mixing-å¯†é’¥åŠ å¯†" class="headerlink" title="Key Mixing å¯†é’¥åŠ å¯†"></a>Key Mixing å¯†é’¥åŠ å¯†</h3><p>æ‰€è°“Key Mixingå…¶å®å¼‚å¸¸ç®€å•ï¼Œå°±æ˜¯ç»™ä¸€ä¸ª16bitçš„å¯†é’¥ï¼Œç„¶åå’Œ16bitçš„è¾“å…¥è¿›è¡Œå¼‚æˆ–ï¼Œå°±å¾—åˆ°äº†16bitçš„è¾“å‡ºã€‚</p><h3 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h3><p>æœ¬å›¾æ˜¯ä» A Tutorial on Linear and Differential Cryptanalysis ä¸­æ‘˜ä¸‹æ¥çš„ã€‚</p><p><img src="https://s2.loli.net/2022/09/14/BTviQCeltA48Ezo.png" alt="image-20220914170446654"></p><h2 id="çº¿æ€§åˆ†æ"><a href="#çº¿æ€§åˆ†æ" class="headerlink" title="çº¿æ€§åˆ†æ"></a>çº¿æ€§åˆ†æ</h2><p>æˆ‘åŸä»¥ä¸ºï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»æ˜å¯†æ–‡å¯¹è·å–åŠ å¯†ä¿¡æ¯ï¼Œå¹¶ä¸”ç ´è¯‘å¯†ç ã€‚ç»“æœï¼Œæˆ‘å‘ç°æˆ‘ä»¬èƒ½åšçš„ä¸è¿‡æ˜¯åœ¨Substitutionå’ŒPermutationéƒ½å·²çŸ¥çš„æƒ…å†µä¸‹å»æ¨æµ‹Subkeyçš„å€¼ã€‚ä½†å³ä¾¿å¦‚æ­¤ï¼Œä¹Ÿå¹¶éæ˜“äº‹ã€‚</p><h3 id="å †ç§¯å¼•ç†"><a href="#å †ç§¯å¼•ç†" class="headerlink" title="å †ç§¯å¼•ç†"></a>å †ç§¯å¼•ç†</h3><p>$X_1,X_2,\cdots,X_n$æ˜¯äºŒå€¼åˆ†å¸ƒï¼Œåœ¨å®ƒä»¬ç›¸äº’ç‹¬ç«‹çš„æƒ…å†µä¸‹ï¼Œè‹¥$p_1=\frac12+\epsilon_1,\cdots,p_n=\frac12+\epsilon_n$ï¼Œåˆ™æœ‰ï¼š<br>$$<br>Pr(X_1 \oplus \cdots \oplus X_n = 0) = \frac12 + 2^{n-1}\prod_{i=1}^{n}\epsilon_i<br>$$<br>æˆ–è€…è¯´ï¼š<br>$$<br>\epsilon_{1,2,\cdots,n} = 2^{n-1}\prod_{i=1}^{n}\epsilon_i<br>$$<br>æˆ‘ä»¬ç§°$\epsilon$ä¸º<code>bias</code>ï¼Œåå·®ï¼Œ$\epsilon=Pr-\frac12$ã€‚</p><h3 id="çº¿æ€§æ‹ŸåˆS-box"><a href="#çº¿æ€§æ‹ŸåˆS-box" class="headerlink" title="çº¿æ€§æ‹ŸåˆS-box"></a>çº¿æ€§æ‹ŸåˆS-box</h3><p>ç”±äºS-boxæ˜¯æ•´ä¸ªåŠ å¯†è¿‡ç¨‹ä¸­å”¯ä¸€çš„éçº¿æ€§è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯æœ¬åŠ å¯†æ–¹æ³•çš„å®‰å…¨æ€§æ‰€åœ¨ã€‚ä¸ºäº†ç ´è¯‘å¯†ç ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¯¹S-boxè¿›è¡Œçº¿æ€§æ‹Ÿåˆã€‚</p><p>å‡è®¾S-boxçš„è¾“å…¥æ˜¯$X_1,X_2,X_3,X_4$ï¼Œè¾“å‡ºæ˜¯$Y_1,Y_2,Y_3,Y_4$ï¼Œåˆ—å‡ºä¸€ç»„çº¿æ€§è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®—å‡ºè¾“å…¥éšæœºçš„æ—¶å€™ï¼Œè¯¥çº¿æ€§è¡¨è¾¾å¼æˆç«‹çš„æ¦‚ç‡ã€‚è­¬å¦‚ï¼š$X_2 \oplus X_3 = Y_1 \oplus Y_3 \oplus Y_4$ï¼Œç©·ä¸¾åå¯çŸ¥16ä¸ªä¸åŒè¾“å…¥ä¸­æœ‰12ä¸ªä½¿å¾—è¿™ä¸ªå¼å­æˆç«‹ã€‚åˆ™æˆç«‹æ¦‚ç‡æ˜¯$\frac34$ï¼Œåå·®æ˜¯$\frac14$ã€‚</p><h3 id="å­å¯†é’¥åˆ†æ"><a href="#å­å¯†é’¥åˆ†æ" class="headerlink" title="å­å¯†é’¥åˆ†æ"></a>å­å¯†é’¥åˆ†æ</h3><p>æˆ‘ä»¬é€‰å–åå·®è¾ƒå¤§çš„çº¿æ€§æ–¹ç¨‹ï¼Œç„¶åæ¨¡æ‹Ÿè¯¥æ–¹ç¨‹æ‰€æ¶‰åŠåˆ°çš„è¾“å…¥çš„åŠ å¯†è·¯åŠ²ï¼Œæ²¿é€”åº”ç”¨å †ç§¯å¼•ç†ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ˜æ–‡å’Œå€’æ•°ç¬¬äºŒè½®çš„è¾“å‡ºçš„ä¸€ä¸ªçº¿æ€§è¡¨ç¤ºçš„æˆç«‹çš„æ¦‚ç‡çš„åå·®çš„ç»å¯¹å€¼ã€‚</p><p>ç„¶åï¼Œç©·ä¸¾æœ€åä¸€ä¸ªsubkeyçš„æœ‰æ¶‰åŠçš„ä½ï¼Œæ ¹æ®å¯†æ–‡é€†æ¨å¾—åˆ°å€’æ•°ç¬¬äºŒè½®è¾“å‡ºï¼Œç„¶åå’Œæ˜æ–‡ä¸€èµ·ï¼Œè®°å½•çº¿æ€§è¡¨è¾¾å¼æˆç«‹çš„æ¬¡æ•°ã€‚é€‰å–å¾ˆå¤šç»„æ˜æ–‡å¯¹ï¼ˆè®ºæ–‡æ˜¯1ä¸‡ç»„ï¼Œæˆ‘å®æµ‹æ˜¯10ä¸‡ç»„æ‰èƒ½å¾—åˆ°å¥½çš„ç»“æœï¼‰ï¼Œè®¡ç®—çº¿æ€§è¡¨ç¤ºæˆç«‹æ¦‚ç‡ã€‚å¯¹äºç©·ä¸¾åˆ°çš„æ¯ä¸€ä¸ªsubkeyï¼Œæœ€ååå·®ç»å¯¹å€¼æœ€å¤§çš„é‚£ä¸€ä¸ªå°±é«˜æ¦‚ç‡æ˜¯å¯†é’¥ï¼Œè€Œä¸”è¿™ä¸ªåå·®å’Œçº¿æ€§è¡¨è¾¾å¼çš„åå·®çš„éå¸¸æ¥è¿‘ã€‚</p><h2 id="å¤ç°"><a href="#å¤ç°" class="headerlink" title="å¤ç°"></a>å¤ç°</h2><h3 id="åŠ å¯†è¿‡ç¨‹å¤ç°"><a href="#åŠ å¯†è¿‡ç¨‹å¤ç°" class="headerlink" title="åŠ å¯†è¿‡ç¨‹å¤ç°"></a>åŠ å¯†è¿‡ç¨‹å¤ç°</h3><p>æœ€å¼€å§‹æ˜¯æ‰“ç®—ç”¨Pythonçš„ï¼Œåæ¥å‘ç°Pythonä½è¿ç®—å¹¶ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å°±ç”¨C++äº†ã€‚è´´ä¸ªä»£ç å§ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bitset&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> u8<span class="token punctuation">,</span> u4<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span> u16<span class="token punctuation">;</span><span class="token keyword">const</span> u4 sbox<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token number">0xE</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">,</span> <span class="token number">0xD</span><span class="token punctuation">,</span> <span class="token number">0x1</span><span class="token punctuation">,</span>    <span class="token number">0x2</span><span class="token punctuation">,</span> <span class="token number">0xF</span><span class="token punctuation">,</span> <span class="token number">0xB</span><span class="token punctuation">,</span> <span class="token number">0x8</span><span class="token punctuation">,</span>    <span class="token number">0x3</span><span class="token punctuation">,</span> <span class="token number">0xA</span><span class="token punctuation">,</span> <span class="token number">0x6</span><span class="token punctuation">,</span> <span class="token number">0xC</span><span class="token punctuation">,</span>    <span class="token number">0x5</span><span class="token punctuation">,</span> <span class="token number">0x9</span><span class="token punctuation">,</span> <span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0x7</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> u4 wire<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">,</span> <span class="token number">0x8</span><span class="token punctuation">,</span> <span class="token number">0xc</span><span class="token punctuation">,</span>    <span class="token number">0x1</span><span class="token punctuation">,</span> <span class="token number">0x5</span><span class="token punctuation">,</span> <span class="token number">0x9</span><span class="token punctuation">,</span> <span class="token number">0xd</span><span class="token punctuation">,</span>    <span class="token number">0x2</span><span class="token punctuation">,</span> <span class="token number">0x6</span><span class="token punctuation">,</span> <span class="token number">0xa</span><span class="token punctuation">,</span> <span class="token number">0xe</span><span class="token punctuation">,</span>    <span class="token number">0x3</span><span class="token punctuation">,</span> <span class="token number">0x7</span><span class="token punctuation">,</span> <span class="token number">0xb</span><span class="token punctuation">,</span> <span class="token number">0xf</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> u16 KEYS<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token number">0xed52</span><span class="token punctuation">,</span>    <span class="token number">0x3799</span><span class="token punctuation">,</span>    <span class="token number">0xac27</span><span class="token punctuation">,</span>    <span class="token number">0x47fc</span><span class="token punctuation">,</span>    <span class="token number">0x72b4</span><span class="token punctuation">,</span>    <span class="token comment">// 0xacbd, å¯†é’¥éšä¾¿æ”¹</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">inline</span> u16 <span class="token function">permutation</span><span class="token punctuation">(</span>u16<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">inline</span> u16 <span class="token function">substitution</span><span class="token punctuation">(</span>u16<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">inline</span> u16 <span class="token function">key_mixing</span><span class="token punctuation">(</span>u16<span class="token punctuation">,</span> u16<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">inline</span> u16 <span class="token function">halfWordFunc</span><span class="token punctuation">(</span>u16<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> u16<span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">freopen</span><span class="token punctuation">(</span><span class="token string">"1.data.in"</span><span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">freopen</span><span class="token punctuation">(</span><span class="token string">"1.data.out"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">,</span> <span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> ch1<span class="token punctuation">,</span> ch2<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token punctuation">(</span>ch1 <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ch2 <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ch2 <span class="token operator">==</span> <span class="token constant">EOF</span><span class="token punctuation">)</span> ch2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        u16 data <span class="token operator">=</span> ch1 <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> ch2<span class="token punctuation">;</span> <span class="token comment">// ä¸¤ä¸ªå­—èŠ‚16bitä¸ºä¸€ç»„</span>        <span class="token function">halfWordFunc</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> KEYS<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ch1 <span class="token operator">=</span> data <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>        ch2 <span class="token operator">=</span> data <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">;</span>        <span class="token function">putchar</span><span class="token punctuation">(</span>ch1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">putchar</span><span class="token punctuation">(</span>ch2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">inline</span> u16 <span class="token function">substitution</span><span class="token punctuation">(</span>u16 data<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> u16 p1 <span class="token operator">=</span> <span class="token number">0xf000</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> <span class="token number">0x0f00</span><span class="token punctuation">,</span> p3 <span class="token operator">=</span> <span class="token number">0x00f0</span><span class="token punctuation">,</span> p4 <span class="token operator">=</span> <span class="token number">0x000f</span><span class="token punctuation">;</span>    u16 d1 <span class="token operator">=</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;</span> p1<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">12</span><span class="token punctuation">,</span> d2 <span class="token operator">=</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;</span> p2<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">,</span> d3 <span class="token operator">=</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;</span> p3<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span> d4 <span class="token operator">=</span> data <span class="token operator">&amp;</span> p4<span class="token punctuation">;</span>    d1 <span class="token operator">=</span> sbox<span class="token punctuation">[</span>d1<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">12</span><span class="token punctuation">;</span>    d2 <span class="token operator">=</span> sbox<span class="token punctuation">[</span>d2<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span>    d3 <span class="token operator">=</span> sbox<span class="token punctuation">[</span>d3<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>    d4 <span class="token operator">=</span> sbox<span class="token punctuation">[</span>d4<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> d1 <span class="token operator">|</span> d2 <span class="token operator">|</span> d3 <span class="token operator">|</span> d4<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">inline</span> u16 <span class="token function">permutation</span><span class="token punctuation">(</span>u16 data<span class="token punctuation">)</span><span class="token punctuation">{</span>    bitset<span class="token operator">&lt;</span><span class="token number">16</span><span class="token operator">&gt;</span> bst <span class="token operator">=</span> data<span class="token punctuation">,</span> out<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        out<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> bst<span class="token punctuation">[</span>wire<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>u16<span class="token punctuation">)</span> out<span class="token punctuation">.</span><span class="token function">to_ulong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">inline</span> u16 <span class="token function">key_mixing</span><span class="token punctuation">(</span>u16 data<span class="token punctuation">,</span> u16 key<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> data <span class="token operator">^</span> key<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">inline</span> u16 <span class="token function">halfWordFunc</span><span class="token punctuation">(</span>u16<span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">const</span> u16<span class="token operator">*</span> keys<span class="token punctuation">,</span> <span class="token keyword">int</span> round<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> round<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token function">key_mixing</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> keys<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        data <span class="token operator">=</span> <span class="token function">substitution</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        data <span class="token operator">=</span> <span class="token function">permutation</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    data <span class="token operator">=</span> <span class="token function">key_mixing</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> keys<span class="token punctuation">[</span>round<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    data <span class="token operator">=</span> <span class="token function">substitution</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    data <span class="token operator">=</span> <span class="token function">key_mixing</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> keys<span class="token punctuation">[</span>round<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> data<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¯†ç åˆ†æ"><a href="#å¯†ç åˆ†æ" class="headerlink" title="å¯†ç åˆ†æ"></a>å¯†ç åˆ†æ</h3><p>è¿™æ¬¡ç”¨çš„Pythonï¼Œè™½ç„¶æˆ‘è¿˜æ˜¯è§‰å¾—Pythonçš„ä½è¿ç®—çœŸçš„æœ‰äº›åˆ«æ‰­â€¦â€¦</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token string">'U4,6 ^ U4,8 ^ U4,14 ^ U4,16 ^ P5 ^ P7 ^ P8 = 0'</span>SBOX <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token number">0xE</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">,</span> <span class="token number">0xD</span><span class="token punctuation">,</span> <span class="token number">0x1</span><span class="token punctuation">,</span>    <span class="token number">0x2</span><span class="token punctuation">,</span> <span class="token number">0xF</span><span class="token punctuation">,</span> <span class="token number">0xB</span><span class="token punctuation">,</span> <span class="token number">0x8</span><span class="token punctuation">,</span>    <span class="token number">0x3</span><span class="token punctuation">,</span> <span class="token number">0xA</span><span class="token punctuation">,</span> <span class="token number">0x6</span><span class="token punctuation">,</span> <span class="token number">0xC</span><span class="token punctuation">,</span>    <span class="token number">0x5</span><span class="token punctuation">,</span> <span class="token number">0x9</span><span class="token punctuation">,</span> <span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0x7</span><span class="token punctuation">,</span><span class="token punctuation">)</span>WIRE <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">,</span> <span class="token number">0x8</span><span class="token punctuation">,</span> <span class="token number">0xc</span><span class="token punctuation">,</span>    <span class="token number">0x1</span><span class="token punctuation">,</span> <span class="token number">0x5</span><span class="token punctuation">,</span> <span class="token number">0x9</span><span class="token punctuation">,</span> <span class="token number">0xd</span><span class="token punctuation">,</span>    <span class="token number">0x2</span><span class="token punctuation">,</span> <span class="token number">0x6</span><span class="token punctuation">,</span> <span class="token number">0xa</span><span class="token punctuation">,</span> <span class="token number">0xe</span><span class="token punctuation">,</span>    <span class="token number">0x3</span><span class="token punctuation">,</span> <span class="token number">0x7</span><span class="token punctuation">,</span> <span class="token number">0xb</span><span class="token punctuation">,</span> <span class="token number">0xf</span><span class="token punctuation">,</span><span class="token punctuation">)</span>INV_SBOX <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token number">0xe</span><span class="token punctuation">,</span> <span class="token number">0x3</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">,</span> <span class="token number">0x8</span><span class="token punctuation">,</span>    <span class="token number">0x1</span><span class="token punctuation">,</span> <span class="token number">0xc</span><span class="token punctuation">,</span> <span class="token number">0xa</span><span class="token punctuation">,</span> <span class="token number">0xf</span><span class="token punctuation">,</span>    <span class="token number">0x7</span><span class="token punctuation">,</span> <span class="token number">0xd</span><span class="token punctuation">,</span> <span class="token number">0x9</span><span class="token punctuation">,</span> <span class="token number">0x6</span><span class="token punctuation">,</span>    <span class="token number">0xb</span><span class="token punctuation">,</span> <span class="token number">0x2</span><span class="token punctuation">,</span> <span class="token number">0x0</span><span class="token punctuation">,</span> <span class="token number">0x5</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token string">'æ˜æ–‡å¯¹ä¸ªæ•°'</span>DATA_GROUP <span class="token operator">=</span> <span class="token number">100000</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    anlysis <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'partial subkey'</span><span class="token punctuation">,</span> <span class="token string">'|bias|'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment"># print(anlysis.info())</span>    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        fp <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'1.data.in'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span>        fe <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'1.data.out'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span>        k2 <span class="token operator">=</span> k <span class="token operator">&gt;&gt;</span> <span class="token number">4</span>        k4 <span class="token operator">=</span> k <span class="token operator">&amp;</span> <span class="token number">0xf</span>        key <span class="token operator">=</span> k2 <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> k4        count_of_equal <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>DATA_GROUP<span class="token punctuation">)</span><span class="token punctuation">:</span>            p <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>fp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>fp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            e <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>fe<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>fe<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># print('%X-&gt;%X'%(p,e))</span>            v <span class="token operator">=</span> key <span class="token operator">^</span> e            u2 <span class="token operator">=</span> INV_SBOX<span class="token punctuation">[</span><span class="token punctuation">(</span>v<span class="token operator">&amp;</span><span class="token number">0x0f00</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">8</span><span class="token punctuation">]</span>            u4 <span class="token operator">=</span> INV_SBOX<span class="token punctuation">[</span><span class="token punctuation">(</span>v<span class="token operator">&amp;</span><span class="token number">0x000f</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">0</span><span class="token punctuation">]</span>            u_4_6 <span class="token operator">=</span> <span class="token punctuation">(</span>u2 <span class="token operator">&amp;</span> <span class="token number">0b0100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">2</span>            u_4_8 <span class="token operator">=</span> <span class="token punctuation">(</span>u2 <span class="token operator">&amp;</span> <span class="token number">0b0001</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span>            u_4_14 <span class="token operator">=</span> <span class="token punctuation">(</span>u4 <span class="token operator">&amp;</span> <span class="token number">0b0100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">2</span>            u_4_16 <span class="token operator">=</span> <span class="token punctuation">(</span>u4 <span class="token operator">&amp;</span> <span class="token number">0b0001</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span>            p_5 <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">&amp;</span> <span class="token number">0x0800</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">11</span>            p_7 <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">&amp;</span> <span class="token number">0x0200</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">9</span>            p_8 <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">&amp;</span> <span class="token number">0x0100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">8</span>            <span class="token keyword">if</span> u_4_14 <span class="token operator">^</span> u_4_6 <span class="token operator">^</span> u_4_8 <span class="token operator">^</span> u_4_16 <span class="token operator">==</span> p_5 <span class="token operator">^</span> p_7 <span class="token operator">^</span> p_8<span class="token punctuation">:</span>                count_of_equal <span class="token operator">+=</span> <span class="token number">1</span>        anlysis <span class="token operator">=</span> anlysis<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'partial subkey'</span><span class="token punctuation">:</span><span class="token string">'%x %x'</span><span class="token operator">%</span><span class="token punctuation">(</span>k2<span class="token punctuation">,</span>k4<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'|bias|'</span><span class="token punctuation">:</span><span class="token string">'%.04f'</span><span class="token operator">%</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>count_of_equal <span class="token operator">-</span> DATA_GROUP <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> DATA_GROUP<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        fp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        fe<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    anlysis<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'1.data.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†æç»“æœ"><a href="#åˆ†æç»“æœ" class="headerlink" title="åˆ†æç»“æœ"></a>åˆ†æç»“æœ</h3><p><img src="https://s2.loli.net/2022/09/14/1NjkxWlZRbOAPgs.png" alt="image-20220914173715473"></p><p>å¯è§ç¬¬äº”è½®subkeyçš„ç¬¬5-9bitæ˜¯0b0010ï¼Œç¬¬13-16bitæ˜¯0b0100ï¼Œè¿˜æ˜¯ååˆ†å‡†ç¡®çš„ï¼Œè€Œä¸”biasæ˜¯0.0308å’Œè®ºæ–‡ç»™çš„ç†è®ºå€¼$\frac1{32}=0.03125$è¿˜æ˜¯ååˆ†æ¥è¿‘çš„ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>[1]Heys,  Howard M . A Tutorial on Linear and Differential Cryptanalysis[J]. Cryptologia, 2002, 26(3):189-221.</p>]]></content>
      
      
      <categories>
          
          <category> å¯†ç å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> Python </tag>
            
            <tag> å¯†ç åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨VScodeè¿›è¡ŒVerilogä»¿çœŸå’Œæ³¢å½¢æŸ¥çœ‹</title>
      <link href="posts/verilogwithvscode.html"/>
      <url>posts/verilogwithvscode.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è®¡ç»„è¯¾ç¨‹å®˜æ–¹æ¨èçš„Verilogä»¿çœŸå·¥å…·æ˜¯ISEå’ŒVCSï¼Œè¯„æµ‹æœºä½¿ç”¨ISEã€‚</p><p>ä½†æ˜¯åœ¨å°è¯•åœ¨win11çš„wslgä¸Šå®‰è£…ISEåï¼Œè™½ç„¶æˆåŠŸäº†ï¼Œä½†æ˜¯éš¾ç”¨çš„ä¸€æ‰¹ï¼Œè€Œä¸”è¿˜æœ‰bugï¼Œä»¿çœŸæ€»æ˜¯å¤±è´¥ç­‰é—®é¢˜ã€‚è€Œè¯¾ç¨‹è™šæ‹Ÿæœºé‡Œé¢çš„VCSæŒ‰ç…§è¯¾ç¨‹ç»„æä¾›çš„æ–¹æ³•ï¼Œåˆæ— æ³•ç”Ÿæˆæ³¢å½¢æ–‡ä»¶ï¼ŒæŸ¥é˜…èµ„æ–™åä¹Ÿä¸€ç­¹è«å±•ï¼Œå¼„çš„æˆ‘ä¸€å¤´é›¾æ°´ã€‚äºæ˜¯å¼€å§‹å¯»æ±‚å…¶ä»–å·¥å…·ã€‚</p><p>åœ¨ç»è¿‡ä¸åŒå…³é”®è¯æ£€ç´¢ä»¥åï¼Œç»ˆäºçœ‹åˆ°äº†æœ¬æ ¡å­¦é•¿çš„çŸ¥ä¹ä¸“æ ï¼Œæ¨èäº†ä¸€ä¸ªVScodeä¸Šè¿›è¡ŒVerilogä»¿çœŸçš„æ–¹æ³•ï¼å®‰è£…ä¸ä»…éå¸¸ç®€å•ï¼Œè€Œä¸”ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œçˆ†æ€20Gçš„ISEå’Œå®‰è£…ç¹ççš„VCSï¼è€Œä¸”æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œè·¨å¹³å°çš„è½¯ä»¶ï¼Œç®€ç›´å°±æ˜¯ç¥ä¸€èˆ¬çš„å­˜åœ¨ï¼</p><p>ä¸‹é¢çš„æ•™ç¨‹å‚è€ƒäº†<a href="https://zhuanlan.zhihu.com/p/414308549">å­¦é•¿çš„ä¸“æ </a></p><h2 id="å®‰è£…VScode"><a href="#å®‰è£…VScode" class="headerlink" title="å®‰è£…VScode"></a>å®‰è£…VScode</h2><p>ä¸ä¼šå§ä¸ä¼šå§ï¼Œä¸ä¼šæœ‰äººçœ‹è¿™ç¯‡æ–‡ç« å´æ²¡æœ‰å®‰è£…VScodeå§ã€‚</p><h2 id="å®‰è£…iVerilog"><a href="#å®‰è£…iVerilog" class="headerlink" title="å®‰è£…iVerilog"></a>å®‰è£…iVerilog</h2><p>iVerilogå…¨ç§°Icarus Verilogï¼Œå®˜æ–¹ä¸‹è½½æ–¹å¼<a href="http://bleyer.org/icarus/">åœ¨è¿™é‡Œ</a></p><p>å®‰è£…çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥éšæ„ï¼Œç›´æ¥Nextéƒ½è¡Œï¼Œä¸è¿‡è®°å¾—æ·»åŠ PATHã€‚å°±æ˜¯ä¸€å®šè¦å‹¾é€‰â€œAdd executable folders to the user PATHâ€</p><h2 id="å®‰è£…VScodeæ’ä»¶"><a href="#å®‰è£…VScodeæ’ä»¶" class="headerlink" title="å®‰è£…VScodeæ’ä»¶"></a>å®‰è£…VScodeæ’ä»¶</h2><p>ä½ éœ€è¦å®‰è£…ä»¥ä¸‹å‡ ä¸ªæ’ä»¶ï¼š</p><ul><li>Verilog-HDL/SystemVerilog/Bluespec SystemVerilog</li><li>Verilog HDL</li><li>Verilog Snippet</li><li>WaveTrace</li></ul><p>å‰ä¸‰ä¸ªæ’ä»¶ï¼Œæä¾›ä»£ç é«˜äº®ï¼Œä»£ç è¡¥å…¨ï¼Œä¸€é”®è¿è¡Œç­‰åŠŸèƒ½ã€‚</p><p>ç¬¬å››ä¸ªæ’ä»¶ï¼Œæä¾›æ³¢å½¢æŸ¥çœ‹ã€‚ï¼ˆä¸‹è½½iVerilogçš„æ—¶å€™åº”è¯¥æœ‰ä¸‹è½½GTKWaveï¼Œä½ ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªè½¯ä»¶æŸ¥çœ‹æ³¢å½¢ï¼‰</p><h2 id="æ’ä»¶è®¾ç½®"><a href="#æ’ä»¶è®¾ç½®" class="headerlink" title="æ’ä»¶è®¾ç½®"></a>æ’ä»¶è®¾ç½®</h2><p>ä»…éœ€è¦è®¾ç½®Verilog-HDL/SystemVerilog/Bluespec SystemVerilogæ’ä»¶</p><p>æ‰¾åˆ°æ’ä»¶è®¾ç½®ä¸­çš„Verilog &gt; Linting: Linter</p><p>åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰ä¸­iverilogå³å¯</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å†™ä¸€ç«¯.vä»£ç ï¼Œç„¶åå†™å¯¹åº”çš„testbenchï¼Œç„¶ååœ¨testbenché‡Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç»¿è‰²çš„æŒ‰é’®ï¼Œå³å¯è¿è¡Œã€‚</p><p>è‹¥æƒ³è¦ç”Ÿæˆæ³¢å½¢æ–‡ä»¶ï¼Œè¯·åœ¨testbenchä¸­åŠ ä¸Šä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">initial</span> <span class="token keyword">begin</span>    <span class="token property">$dumpfile</span><span class="token punctuation">(</span><span class="token string">"*.vcd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// * æ˜¯ä½ å¸Œæœ›äº§ç”Ÿçš„æ³¢å½¢æ–‡ä»¶çš„åå­—</span>    <span class="token property">$dumpvars</span><span class="token punctuation">;</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼šä½ å¿…é¡»åœ¨testbenchçš„testè¿è¡Œç»“æŸä¹‹åï¼Œä½¿ç”¨<code>$finish;</code>ç»“æŸä»£ç ï¼Œå¦åˆ™æ³¢å½¢æ–‡ä»¶ä¸ä¼šç»“æŸï¼Œéœ€è¦æ‰‹åŠ¨å‰å¾€ä»»åŠ¡ç®¡ç†å™¨ï¼Œç»“æŸ<code>vvp.exe</code>è¿›ç¨‹ã€‚</p><p>æœ€åç‚¹å¼€<code>*.vcd</code>æ–‡ä»¶å°±å¯ä»¥æŸ¥çœ‹æ³¢å½¢äº†ï¼ˆå¦‚æœä½ ä¸‹è½½äº†WaveTraceæ’ä»¶çš„è¯ï¼‰</p><p>testbenchæ€ä¹ˆå†™æˆ‘å°±ä¸æ•™äº†å§ï¼Œä¸‹é¢ç»™ä¸€ä¸ªæµ‹è¯•ä»£ç å§ã€‚</p><h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token comment">// adder.v</span><span class="token constant">`timescale</span> <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ps<span class="token keyword">module</span> adder <span class="token punctuation">(</span>  <span class="token keyword">input</span> clk<span class="token punctuation">,</span>  <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> in1<span class="token punctuation">,</span>  <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> in2<span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>    out <span class="token operator">&lt;=</span> in1 <span class="token operator">+</span> in2<span class="token punctuation">;</span>  <span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token comment">// adder_tb.v</span><span class="token constant">`timescale</span> <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ps<span class="token constant">`include</span> <span class="token string">"adder.v"</span><span class="token keyword">module</span> adder_tb<span class="token punctuation">;</span>  <span class="token comment">// Dump waveform to file (it would be impossible to view wavefrom without</span>  <span class="token comment">// this task)</span>  <span class="token keyword">initial</span> <span class="token keyword">begin</span>      <span class="token property">$dumpfile</span><span class="token punctuation">(</span><span class="token string">"adder_wave.vcd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">$dumpvars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">end</span>  <span class="token comment">// Generate clock</span>  <span class="token keyword">reg</span> clk<span class="token punctuation">;</span>  <span class="token keyword">initial</span> clk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token important">always </span><span class="token number">#10</span> clk <span class="token operator">=</span> <span class="token operator">~</span>clk<span class="token punctuation">;</span>  <span class="token comment">// Input registers</span>  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>  <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> c<span class="token punctuation">;</span>  <span class="token keyword">initial</span> <span class="token keyword">begin</span>    a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    @<span class="token punctuation">(</span><span class="token keyword">negedge</span> clk<span class="token punctuation">)</span><span class="token punctuation">;</span>    a <span class="token operator">=</span> <span class="token number">32'h631</span><span class="token punctuation">;</span>    b <span class="token operator">=</span> <span class="token number">341</span><span class="token punctuation">;</span>    @<span class="token punctuation">(</span><span class="token keyword">negedge</span> clk<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"%d + %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>    a <span class="token operator">=</span> <span class="token number">32'o1461</span><span class="token punctuation">;</span>    b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    @<span class="token punctuation">(</span><span class="token keyword">negedge</span> clk<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"%d + %d = %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token number">#20</span><span class="token punctuation">;</span>    <span class="token comment">// Exit the simulation</span>    <span class="token property">$finish</span><span class="token punctuation">;</span>  <span class="token keyword">end</span>  <span class="token comment">// Device under test (our adder)</span>  adder <span class="token function">dut</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">in1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">in2</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://zhuanlan.zhihu.com/p/414308549">https://zhuanlan.zhihu.com/p/414308549</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®¡ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CO </tag>
            
            <tag> VScode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Xcodeç¼–è¯‘Swift Appå¹¶åˆ†å‘åˆ°iPhoneæˆ–iPadä¸Š</title>
      <link href="posts/swift-xcode-ipa.html"/>
      <url>posts/swift-xcode-ipa.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™å­¦æœŸæˆåŠŸé€‰ä¸Šäº†Swiftç¨‹åºè®¾è®¡è¿™é—¨è¯¾ã€‚è™½ç„¶æˆ‘è¿˜åªä¼šå†™Hello Worldï¼Œä½†æ˜¯å·²ç»éå¸¸å¥½å¥‡å¦‚ä½•å°†è‡ªå·±å†™çš„ç¨‹åºæ”¾åœ¨è‡ªå·±çš„iPhoneä¸­è¿è¡Œäº†ï¼Œå› æ­¤æˆ‘ä»¬ä»Šå¤©å°±æ¥å°è¯•ä¸€æ¬¡ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>Macä¸Šçš„Xcodeå’ŒiPadä¸Šçš„Playgroundå·®è·è¿˜æ˜¯æœ‰äº›å¤§çš„ã€‚ä½†æ˜¯å› ä¸ºæˆ‘çš„Macæ˜¯è™šæ‹Ÿæœºï¼Œè¿è¡Œç¼“æ…¢ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—ç°åœ¨iPadä¸Šç¼–å†™ç¨‹åºå¹¶æµ‹è¯•è¿è¡Œã€‚</p><p>ç”±äºæˆ‘å¯¹Swiftçš„äº†è§£è¿˜å¾ˆå°‘ï¼Œæ‰€ä»¥æˆ‘åœ¨ç½‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªç®€å•çš„ç¨‹åºä½œä¸ºæµ‹è¯•ã€‚<a href="https://github.com/DocRace/playgrounds-covid19-dashboard/">æµ‹è¯•è½¯ä»¶ä¸‹è½½é“¾æ¥</a><sup><a href="#toc-heading-4">[1]</a></sup></p><p>ä¸‹è½½å¥½åï¼Œåœ¨iPadçš„Playgroundä¸­å°è¯•å¯¼å…¥ï¼Œå‡ ä¹éƒ½å¤±è´¥äº†ã€‚é‚æ€€ç–‘æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚äºæ˜¯å‡†å¤‡é‡æ–°åˆ›å»ºé¡¹ç›®åå¤åˆ¶ç²˜è´´æºä»£ç ã€‚ç²˜è´´å¥½åä¼šæç¤º<code>SwiftyJSON</code>å’Œ<code>Alamofire</code>æ‰¾ä¸åˆ°ï¼Œé‚å‰å¾€GitHubæœç´¢ï¼Œå¹¶åœ¨Playgroundçš„æ·»åŠ Swiftè½¯ä»¶åŒ…ä¸­ç²˜è´´é“¾æ¥å¯¼å…¥è½¯ä»¶åŒ…å³å¯ã€‚<br>çœæµï¼šé“¾æ¥åˆ†åˆ«æ˜¯<code>https://github.com/SwiftyJSON/SwiftyJSON</code>å’Œ<code>https://github.com/Alamofire/Alamofire</code></p><p>ç‚¹å‡»è¿è¡Œï¼Œå°±èƒ½çœ‹åˆ°è½¯ä»¶è¿è¡ŒæˆåŠŸäº†ã€‚</p><h2 id="åˆ†å‘"><a href="#åˆ†å‘" class="headerlink" title="åˆ†å‘"></a>åˆ†å‘</h2><p>ç”±äºiPadçš„Playgroundåªèƒ½å°†åº”ç”¨å‘å¸ƒåˆ°App Storeï¼Œè€Œè¿™ä¸ªéœ€è¦ç”¨æˆ·æˆä¸ºApple Developer Memberï¼Œä¸ä»…éœ€è¦éªŒè¯å’Œå®¡æ ¸ï¼Œè¿˜éœ€è¦688å…ƒ/å¹´çš„ä¼šè´¹ï¼Œå¯¹å­¦ç”Ÿæ¥è¯´æ²¡æœ‰å¿…è¦ï¼Œé‚ƒè½¬å‘Xcodeã€‚</p><p>é¦–å…ˆåœ¨Playgroundä¸­å°†åˆšåˆš<del>æŠ„</del>çš„Appå¯¼å‡ºå¹¶å­˜æ”¾åœ¨iCloudä¸­ï¼ˆå­˜ä»€ä¹ˆåœ°æ–¹ä¸é‡è¦ï¼Œæ–¹ä¾¿å¯¼å…¥ç”µè„‘å³å¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥AirDropï¼‰ã€‚éšåæ‰“å¼€Macä¸Šçš„Xcodeï¼Œæ‰“å¼€é¡¹ç›®ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšçš„å¯¼å‡ºçš„è½¯ä»¶ã€‚é¡¹ç›®å¯¼å…¥åï¼ŒXcodeä¼šæç¤ºæ­£åœ¨fetch SwiftyJSONå’ŒAlamofireï¼Œfetchç»“æŸåå°±å¯ä»¥<code>command+R</code>è¿è¡Œäº†ã€‚å¯è§Appåœ¨Simulatorä¸­è¿è¡ŒçŠ¶æ€ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚</p><p>ä¹‹åç‚¹å‡»<code>Xcode-Preferences</code>æˆ–è€…ä½¿ç”¨å¿«æ·é”®<code>command+,</code>æ‰“å¼€åå¥½è®¾ç½®ï¼Œåœ¨Accountsä¸­æ·»åŠ è‡ªå·±çš„AppleIDï¼Œæ·»åŠ æˆåŠŸåå…³é—­åå¥½è®¾ç½®ã€‚</p><p>åœ¨å·¦ä¾§è§†å›¾ä¸­ç‚¹å‡»Appçš„åç§°ï¼Œé€‰ä¸­<code>signing &amp; Capabilities</code>ï¼Œåœ¨Signingæ çš„Development Teamä¸­é€‰ä¸­è‡ªå·±AppleIDçš„åå­—ï¼Œåœ¨Bundle Identifierä¸­å¡«å…¥åº”ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå‘½åè§„èŒƒä¸€èˆ¬æ˜¯<code>com.AppName.DeveloperName</code></p><p>éšåé¼ æ ‡æ‚¬åœåœ¨ä¸­é—´æ­£ä¸Šæ–¹ï¼Œä¼šå‡ºç°ä¸ºä»€ä¹ˆæ„å»ºåº”ç”¨ç¨‹åºï¼Œé€‰ä¸­Any iOS Deviceï¼Œç„¶åç‚¹å‡»èœå•æ <code>Product-Archive</code>ï¼Œç¼–è¯‘æˆåŠŸååœ¨Finderä¸­æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä½ç½®é»˜è®¤åœ¨<code>~/Library/Developer/Xcode/Archives</code>ä¸‹çš„ä»Šå¤©æ—¥æœŸæ–‡ä»¶å¤¹ä¸­ï¼ˆå¯åœ¨åå¥½è®¾ç½®çš„Locationæ æ›´æ”¹ï¼‰ã€‚æ­¤å¯ä»¥çœ‹è§ä¸€ä¸ªæ‰©å±•åä¸º<code>xcarchive</code>çš„æ–‡ä»¶å³è¯´æ˜ç¼–è¯‘æˆåŠŸã€‚</p><p>æœ€åï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°<code>.xcarchive</code>æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<sup><a href="#toc-heading-4">[2]</a></sup></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xcodebuild -exportArchive -exportOptionsPlist Info.plist -archivePath *.xcarchive -exportPath myApp.ipa<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­<code>Info.plist</code>éœ€è¦éšä¾¿å‡†å¤‡ä¸€ä¸ªï¼ˆå¦‚æœä½ æ˜¯ç›´æ¥åœ¨Xcodeä¸­åˆ›å»ºçš„é¡¹ç›®ä¼šé™„èµ ä¸€ä¸ªï¼Œä½ åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æ‰¾åˆ°å³å¯ï¼Œå¦‚æœæ˜¯Playgroundåˆ›å»ºçš„ï¼Œåˆ™éœ€è¦å€Ÿç”¨å…¶ä»–é¡¹ç›®çš„ï¼‰ï¼Œ<code>*.xcarchive</code>ä¸ºä½ çš„åº”ç”¨åç§°ã€‚åœ¨çœ‹åˆ°<code>** EXPORT SUCCEEDED **</code>åè¯´æ˜å¯¼å‡ºipaæˆåŠŸã€‚</p><p>ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹äº§ç”Ÿä¸€ä¸ªå«åšmyApp.ipaçš„æ–‡ä»¶å¤¹ï¼Œå°†å…¶ä¸­çš„myApp.ipaæ–‡ä»¶æ‹¿å‡ºæ¥ï¼Œä½¿ç”¨çˆ±æ€åŠ©æ‰‹å°±å¯ä»¥ç›´æ¥å®‰è£…åœ¨iPad/iPhoneä¸­ä½¿ç”¨ã€‚<sup><a href="#toc-heading-4">[3]</a></sup></p><p>æ³¨æ„ï¼šæ ¹æ®Appleå®˜æ–¹çš„è§„å®šï¼Œå…è´¹ç”¨æˆ·åªèƒ½å°†åŒä¸€ä¸ªç¨‹åºåˆ†å‘ç»™è‡³å¤š3ä¸ªè®¾å¤‡ï¼Œä¸”ä¸€æ¬¡ç­¾åæœ€å¤šæŒç»­7å¤©ã€‚</p><h2 id="å‚è€ƒé“¾æ¥æˆ–æ³¨é‡Š"><a href="#å‚è€ƒé“¾æ¥æˆ–æ³¨é‡Š" class="headerlink" title="å‚è€ƒé“¾æ¥æˆ–æ³¨é‡Š"></a>å‚è€ƒé“¾æ¥æˆ–æ³¨é‡Š</h2><ol><li>å‚è€ƒé“¾æ¥ï¼š<a href="https://sspai.com/post/70655">https://sspai.com/post/70655</a></li><li>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.jianshu.com/p/0171d6b49771">https://www.jianshu.com/p/0171d6b49771</a></li><li>æ³¨é‡Šï¼šç”±äºInfo.plistä¸åŒ¹é…å’Œå…è´¹ç­¾åçš„ç¼˜æ•…ï¼Œä¸èƒ½ä½¿ç”¨iTunesè¿›è¡Œå®‰è£…ï¼Œåªèƒ½ä½¿ç”¨ç¬¬ä¸‰æ–¹åŠ©æ‰‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> Swiftç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Swift </tag>
            
            <tag> Apple </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨WSLä¸Šå®‰è£…ISE</title>
      <link href="posts/install-ise-on-wsl.html"/>
      <url>posts/install-ise-on-wsl.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å› ä¸ºæˆ‘ä»¬è®¡ç»„è¦ä½¿ç”¨åˆ°ISEï¼Œä½†æ˜¯ISEå’Œwin11ä¸ç›¸å®¹ï¼Œæ‰€ä»¥æˆ‘å°±æ‰“ç®—åœ¨wslgä¸Šå®‰è£…ISEäº†ã€‚</p><h2 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h2><ol><li><p>åœ¨å®˜ç½‘ä¸‹è½½<code>Xilinx_ISE_DS_Lin_14.7_1015_1.tar</code>:<a href="https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/vivado-design-tools/archive-ise.html">https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/vivado-design-tools/archive-ise.html</a></p></li><li><p>å°†å‹ç¼©åŒ…è§£å‹ï¼ˆæˆ‘æ˜¯ç›´æ¥åœ¨Nautilusä¸­åŒå‡»è§£å‹çš„ï¼‰</p></li><li><p><code>cd</code>åˆ°è§£å‹åçš„æ–‡ä»¶å¤¹é‡Œé¢ï¼Œé€šè¿‡<code>ls</code>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ls</span>bin     data  idata  labtools  msg        planahead_wp  webpack  xsetupcommon  edk   ise    lib       planahead  sysgen        xinfo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœxsetupæ˜¯å¯è¿è¡Œçš„ï¼Œåˆ™ç›´æ¥<code>sudo ./xsetup</code>ï¼Œå¦åˆ™å…ˆ<code>sudo chmod +x xsetup</code></p></li><li><p>å¦‚æœå®‰è£…æŠ¥é”™ï¼š</p><p><code>error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file</code></p><p>å³ç¼ºå°‘<code>libncurses.so.5</code>åº“æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤è§£å†³</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apt-file$ <span class="token function">sudo</span> apt-file update$ <span class="token function">sudo</span> apt-file <span class="token function">find</span> libncurses.so.5$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libncurses5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å®‰è£…ç•Œé¢æ˜¯å›¾å½¢ç•Œé¢ï¼ŒæŒ‰ç…§æŒ‡å¼•æ“ä½œå³å¯ã€‚å…¨é»˜è®¤å°±è¡Œäº†ï¼Œç›®å½•å°±åœ¨<code>/opt/</code>ï¼Œ<code>Install cable drivers</code>ä¹Ÿä¸ç”¨å®‰è£…</p></li><li><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> /opt/Xilinx/14.7/ISE_DS$ <span class="token function">ls</span>EDK  ISE  PlanAhead  SysGen  Xilinx.lic  common  settings32.csh  settings32.sh  settings64.csh  settings64.sh$ <span class="token builtin class-name">source</span> settings64.sh<span class="token builtin class-name">.</span> /opt/Xilinx/14.7/ISE_DS/common/.settings64.sh /opt/Xilinx/14.7/ISE_DS/common<span class="token builtin class-name">.</span> /opt/Xilinx/14.7/ISE_DS/EDK/.settings64.sh /opt/Xilinx/14.7/ISE_DS/EDK<span class="token builtin class-name">.</span> /opt/Xilinx/14.7/ISE_DS/PlanAhead/.settings64.sh /opt/Xilinx/14.7/ISE_DS/PlanAhead<span class="token builtin class-name">.</span> /opt/Xilinx/14.7/ISE_DS/ISE/.settings64.sh /opt/Xilinx/14.7/ISE_DS/ISE$ ise<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¦‚æœä½ çš„Ubuntuæ˜¯32ä½çš„ï¼Œè¯·é€‰æ‹©<code>settings32.sh</code></p><p>è‡³æ­¤ISEé¦–æ¬¡è¿è¡ŒæˆåŠŸï¼</p></li><li><p>æ‰“å¼€åä¼šæç¤ºæ²¡æœ‰Licenseï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥éœ€è¦åœ¨å®˜ç½‘å…ˆç”³è¯·åˆ°ä¸€ä¸ªå…è´¹çš„Licenseï¼Œç„¶ååœ¨Help -&gt; Manage Licensesé‡Œé¢Loadå®˜ç½‘é€šè¿‡é‚®ä»¶å‘ç»™ä½ çš„<code>Xilinx.lic</code>å³å¯</p></li><li><p>æœ€åç•Œé¢å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/08/08/QbNAiT3snMxW5U6.png"></p></li></ol><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>æ³¨æ„åˆ°æ¯æ¬¡é‡å¯wslåéƒ½å¿…é¡»é‡æ–°è¾“å…¥ç¬¬6æ­¥çš„æŒ‡ä»¤éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥å·²æœ‰å¤§ä½¬å†™äº†è„šæœ¬ä¸€é”®è¿è¡Œï¼š</p><ol><li><p>åœ¨ä»»ä½•åœ°æ–¹æ–°å»ºæ–‡ä»¶ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯<code>/opt/Xilinx/14.7/ISE_DS/quickstart</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_PRELOAD</span><span class="token operator">=</span>/opt/Xilinx/usb-driver/libusb-driver.so<span class="token assign-left variable">ISE_DS_DIR</span><span class="token operator">=</span>/opt/Xilinx/14.7/ISE_DS<span class="token builtin class-name">unset</span> LD_PRELOAD<span class="token builtin class-name">export</span> <span class="token assign-left variable">gmake</span><span class="token operator">=</span>/usr/bin/make<span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$ISE_DS_DIR</span>"</span><span class="token builtin class-name">source</span> <span class="token string">"<span class="token variable">$ISE_DS_DIR</span>"</span>/settings64.sh<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span><span class="token string">''</span>  <span class="token comment"># reset locale to English to fix decimal/comma seperation</span><span class="token string">"<span class="token variable">$ISE_DS_DIR</span>"</span>/ISE/bin/lin64/ise<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¹¶ä¸ºè„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> a+x /opt/Xilinx/14.7/ISE_DS/quickstart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åœ¨<code>/usr/share/applications</code>æ–°å»ºæ–‡ä»¶<code>ISE.desktop</code>ï¼Œå†…å®¹ä¸ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span><span class="token assign-left variable">Version</span><span class="token operator">=</span><span class="token number">1.0</span><span class="token assign-left variable">Name</span><span class="token operator">=</span>ISE<span class="token assign-left variable">Exec</span><span class="token operator">=</span>/opt/Xilinx/14.7/ISE_DS/quickstart<span class="token assign-left variable">Terminal</span><span class="token operator">=</span>false<span class="token assign-left variable">Icon</span><span class="token operator">=</span>/opt/Xilinx/14.7/ISE_DS/ISE/data/images/pn-ise.png<span class="token assign-left variable">Type</span><span class="token operator">=</span>Application<span class="token assign-left variable">Categories</span><span class="token operator">=</span>Development<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ExecæŒ‡å‘çš„å°±æ˜¯ä¸Šä¸€æ­¥å»ºç«‹çš„è„šæœ¬æ–‡ä»¶</p></li><li><p>ä¹‹åå¯ä»¥ä½¿ç”¨<code>gtk-launch ISE</code>ä¸€é”®æ‰“å¼€</p></li><li><p>è¿˜å¯ä»¥åœ¨Windowsæ¡Œé¢åˆ›å»ºå¿«æ·æ–¹å¼ï¼š</p><p>è·¯å¾„å†™<code>wslg ~ -d Ubuntu20.04 gtk-launch ISE</code></p><p>ä¸è¿‡è¿™ä¸ªå…¶å®æ˜¯ä¼šè‡ªåŠ¨æ·»åŠ åˆ°å¼€å§‹èœå•çš„</p></li></ol><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ç”±äºISEå®‰è£…åŒ…å·¨å¤§ï¼Œå¦‚æœä¿ç•™éå¸¸å æ®ç©ºé—´ï¼Œæ‰€ä»¥è€ƒè™‘åˆ æ‰ã€‚ä½†æ˜¯åˆ æ‰åå¹¶ä¸èƒ½çœŸæ­£é‡Šæ”¾ç©ºé—´ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨ç£ç›˜å‹ç¼©å·¥å…·å¯¹wslçš„è™šæ‹Ÿç£ç›˜è¿›è¡Œå‹ç¼©ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œpowershellï¼Œå¹¶è¾“å…¥</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Windows\System32&gt; wsl <span class="token operator">--</span>shutdown<span class="token function">PS</span> C:\Windows\System32&gt; diskpartDISKPART&gt; <span class="token function">select</span> vdisk file=<span class="token string">"D:\WSL\ext4.vhdx"</span>DISKPART&gt; attach vdisk readonlyDISKPART&gt; compact vdiskDISKPART&gt; detach vdisk<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­<code>file=</code>åé¢æ˜¯ä½ çš„wslè™šæ‹Ÿç£ç›˜çš„ä½ç½®</p><h2 id="å…³äºé©±åŠ¨"><a href="#å…³äºé©±åŠ¨" class="headerlink" title="å…³äºé©±åŠ¨"></a>å…³äºé©±åŠ¨</h2><p>ç”±äºæˆ‘è¿˜æ²¡æœ‰å¼€å§‹å†™ä»»ä½•ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œå°šä¸çŸ¥é©±åŠ¨æ˜¯å¦æ­£å¸¸ï¼Œè¿™é‡ŒæŒ–ä¸€ä¸ªå‘ï¼Œæ”¹æ—¥å†å¡«ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol><li>ç¼ºå°‘libncurses.so.5æ€ä¹ˆåŠï¼š<a href="https://blog.csdn.net/qq_36393978/article/details/110948418">https://blog.csdn.net/qq_36393978/article/details/110948418</a></li><li>Ubuntuå®‰è£…ISEæ•™ç¨‹ï¼š<a href="https://blog.csdn.net/weixin_43238031/article/details/89022601">https://blog.csdn.net/weixin_43238031/article/details/89022601</a></li><li>Ubuntuå®‰è£…ISEæ•™ç¨‹ä»¥åŠå¿«æ·å¯åŠ¨è„šæœ¬ï¼š<a href="https://blog.csdn.net/ixunmo/article/details/82194896">https://blog.csdn.net/ixunmo/article/details/82194896</a></li><li>é‡Šæ”¾wslå ç”¨ç©ºé—´ï¼š<a href="https://zhuanlan.zhihu.com/p/358528257">https://zhuanlan.zhihu.com/p/358528257</a></li><li>æ¸…ç†wslç£ç›˜å ç”¨ï¼š<a href="https://www.cnblogs.com/enrio/p/14222648.html">https://www.cnblogs.com/enrio/p/14222648.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®¡ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wsl </tag>
            
            <tag> CO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†wslè¿ç§»è‡³Dç›˜</title>
      <link href="posts/movewsltod.html"/>
      <url>posts/movewsltod.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰å› "><a href="#å‰å› " class="headerlink" title="å‰å› "></a>å‰å› </h2><p>å› ä¸ºä¸‹å­¦æœŸçš„è®¡ç»„è¯¾ç¨‹éœ€è¦ç”¨åˆ°ISEï¼Œç„¶è€ŒISEè¿™æ ·13å¹´çš„è½¯ä»¶å’Œwin11è‡ªç„¶æ˜¯ä¸å…¼å®¹äº†ï¼ˆç»è¿‡ç½‘ä¸Šå¤§ä½¬ä»¬çš„å„ç§å°è¯•ï¼Œæœ€ç»ˆä¹Ÿåªèƒ½å®‰è£…åˆ°92%ï¼‰ï¼Œæ‰€ä»¥åœ¨æ°´ç¾¤å¤§ä½¬çš„æ¨èä¸‹ï¼Œæˆ‘å¯ä»¥å°è¯•ä½¿ç”¨WSLGï¼ˆWindows Subsystem for Linux GUIï¼‰æ¥è¿è¡ŒISEï¼Œäºæ˜¯æˆ‘å°±å…ˆå®‰è£…<a href="https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps">å®˜ç½‘æ•™ç¨‹æ›´æ–°äº†wsl2</a>ï¼Œè¿™ä¸ªæµç¨‹ä¸å¤ªéš¾ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>ç”±äºISEä½“é‡å·¨å¤§ï¼Œæ‰€ä»¥ä¸å¾—ä¸å°†WSLè¿ç§»åˆ°Dç›˜ä»¥é˜²æ­¢Cç›˜çˆ†ç‚¸ã€‚</p><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h2><p>è¿ç§»WSLéœ€è¦ä½¿ç”¨å·¥å…·<code>LxRunOffline</code></p><p>GitHubç½‘å€ï¼š<a href="https://github.com/DDoSolitary/LxRunOffline/releases">https://github.com/DDoSolitary/LxRunOffline/releases</a><br>å¦‚æœè¿ç§»ä¸­é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œåˆ™åº”è¯¥æ”¹ç”¨ï¼š<a href="https://ddosolitary-builds.sourceforge.io/LxRunOffline/LxRunOffline-v3.5.0-11-gfdab71a-msvc.zip">https://ddosolitary-builds.sourceforge.io/LxRunOffline/LxRunOffline-v3.5.0-11-gfdab71a-msvc.zip</a></p><pre class="line-numbers language-none"><code class="language-none">[ERROR] Couldn't set the case sensitive attribute of the directory "\\?\C:\Users\toby2\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\LocalState\".Reason: Indicates that the directory trying to be deleted is not empty.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><p>æ³¨æ„ï¼šå»ºè®®ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œpowershell</p><ol><li><p>æŸ¥çœ‹å·²å®‰è£…çš„å­ç³»ç»Ÿ</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token punctuation">.</span><span class="token operator">/</span>LxRunOffline list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><ol start="2"><li><p>æŸ¥çœ‹å­ç³»ç»Ÿæ‰€åœ¨ç›®å½•</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token punctuation">.</span><span class="token operator">/</span>LxRunOffline <span class="token function">get-dir</span> <span class="token operator">-</span>n <span class="token namespace">[xxx]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>xxx</code>æ˜¯ä½ åœ¨æ­¥éª¤1ä¸­æŸ¥è¯¢åˆ°çš„å­ç³»ç»Ÿç‰ˆæœ¬</p></li><li><p>è¿ç§»ç³»ç»Ÿ</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token punctuation">.</span><span class="token operator">/</span>LxRunOffline <span class="token function">move</span> <span class="token operator">-</span>n <span class="token namespace">[xxx]</span> <span class="token operator">-</span>d <span class="token namespace">[ddd]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>xxx</code>æ˜¯ä½ åœ¨æ­¥éª¤1ä¸­æŸ¥è¯¢åˆ°çš„å­ç³»ç»Ÿç‰ˆæœ¬</p><p><code>ddd</code>æ˜¯ä½ æœŸæœ›ç§»åŠ¨åˆ°çš„è·¯å¾„</p></li><li><p>å¦‚æœè¿ç§»ç³»ç»Ÿä¸­å‡ºç°ä»¥ä¸‹é”™è¯¯</p><pre class="line-numbers language-none"><code class="language-none">[ERROR] The distro "Ubuntu-20.04" has running processes and can't be operated. "wsl -t &lt;name&gt;" or "wsl --shutdown" might help.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ™ä½¿ç”¨å¿«æ·é”®<code>Win+x</code>å†æŒ‰<code>g</code>æ‰“å¼€<code>è®¡ç®—æœºç®¡ç†</code>é‡å¯æœåŠ¡<code>LxssManager</code>ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åœæ­¢æœåŠ¡ï¼Œè¿ç§»ç»“æŸåå†æ‰“å¼€ï¼‰</p></li><li><p>å¦‚æœè¿ç§»åUbuntuæŠ¥é”™â€œæ‹’ç»è®¿é—®â€</p><p>ä½¿ç”¨ä¸‹åˆ—æŒ‡å®šä¸ºç›®å½•æˆæƒ</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">icacls <span class="token namespace">[ddd]</span> <span class="token operator">/</span>grant <span class="token string">"[user]:(OI)(CI)(F)"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>ddd</code>ä¸ºç§»åŠ¨åçš„è·¯å¾„</p><p><code>user</code>ä¸ºä½ çš„ç”¨æˆ·å</p><p>æˆæƒåå»ºè®®é‡å¯<code>LxssManager</code>æœåŠ¡</p></li></ol><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ol><li><p>å¦‚æœUbuntuæŠ¥é”™â€œå¦ä¸€ä¸ªç¨‹åºæ­£åœ¨ä½¿ç”¨æ­¤æ–‡ä»¶ï¼Œè¿›ç¨‹æ— æ³•è®¿é—®â€</p><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œä»¥ä¸‹æŒ‡ä»¤</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Enable-WindowsOptionalFeature</span> <span class="token operator">-</span>Online <span class="token operator">-</span>FeatureName Microsoft<span class="token operator">-</span>Windows<span class="token operator">-</span>Subsystem<span class="token operator">-</span>Linux<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åæŒ‰ç…§è¦æ±‚é‡å¯ç”µè„‘</p><p>é€ æˆæ­¤é”™è¯¯çš„åŸå› ä¼°è®¡ä¸ºåœ¨æœªå¼€å¯WSLçš„æƒ…å†µä¸‹ä½¿ç”¨èµ„æºç®¡ç†å™¨å°è¯•æ‰“å¼€WSLçš„ç£ç›˜é•œåƒæ–‡ä»¶ï¼ˆ.vhdxæ–‡ä»¶ï¼‰</p></li><li><p>å…³äºwslgçš„åˆ†è¾¨ç‡</p><p>ç›®å‰wslgä¼¼ä¹åªæ”¯æŒæ•´æ•°å€ç¼©æ”¾ï¼Œè¿™éå¸¸ä¸å‹å¥½ï¼Œä½†æ˜¯å¯ä»¥æ‰‹åŠ¨å¯ç”¨éæ•´æ•°å€ç¼©æ”¾</p><p>åœ¨wslç»ˆç«¯è¾“å…¥<code>sudo vi /mnt/c/ProgramData/Microsoft/WSL/.wslgconfig</code>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆæˆ–è€…åœ¨Windowsä¸­æ‰¾åˆ°<code>C:\ProgramData\Microsoft\WSL</code>ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»ºæ–‡ä»¶<code>.wslgconfig</code>ï¼‰ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[system-distro-env]WESTON_RDP_DISABLE_FRACTIONAL_HI_DPI_SCALING=false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åå…³é—­wslç»ˆç«¯ï¼Œæ‰“å¼€powershellï¼Œè¾“å…¥<code>wsl --shutdown</code>å³å¯</p><p>åªä¸è¿‡150%ç¼©æ”¾ç¡®å®æœ‰ç‚¹ç³Šâ€¦â€¦</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®¡ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wsl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CF R 809 (Div.2) é¢˜è§£</title>
      <link href="posts/codeforcesr809.html"/>
      <url>posts/codeforcesr809.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ¯”èµ›é“¾æ¥"><a href="#æ¯”èµ›é“¾æ¥" class="headerlink" title="æ¯”èµ›é“¾æ¥"></a>æ¯”èµ›é“¾æ¥</h2><p><a href="https://codeforces.com/contest/1706">è¯•é¢˜é“¾æ¥</a></p><p><a href="https://codeforces.com/blog/entry/105008">å®˜æ–¹é¢˜è§£</a></p><p>*æ³¨æ„ï¼šåœ¨æœ¬æ–‡ä¸­ï¼Œé¢˜ç›®å¤§æ„æ²¡æœ‰è¿˜åŸé¢˜ç›®èƒŒæ™¯ï¼Œä¹Ÿæ²¡æœ‰ç»†èŠ‚è¯´æ˜ï¼Œå¦‚æœæ‚¨æ²¡æœ‰çœ‹è¿‡é¢˜ç›®ï¼Œè¿˜è¯·å‰å¾€<a href="https://codeforces.com/contest/1706">Codeforceså®˜ç½‘</a>çœ‹</p><h2 id="Aé¢˜"><a href="#Aé¢˜" class="headerlink" title="Aé¢˜"></a>Aé¢˜</h2><h3 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šé•¿åº¦ä¸º$n$ä¸”åªåŒ…å«$1$å’Œ$m$ä¹‹é—´çš„æ­£æ•´æ•°æ•°åˆ—$a_1,a_2,\cdots,a_n$ï¼Œæœ‰ä¸€ä¸ªé•¿åº¦ä¸º$m$çš„å­—ç¬¦ä¸²$s$ï¼Œåˆå§‹æ—¶ä¸²$s$åªåŒ…å«å­—ç¬¦<code>B</code></p><p>æ¥ä¸‹æ¥è¿›è¡Œå¦‚ä¸‹$n$æ¬¡æ“ä½œï¼š</p><ul><li>åœ¨ç¬¬$i$æ¬¡æ“ä½œæ—¶$(1\le i \le n)$ï¼Œä½ å¯ä»¥é€‰æ‹©å°†$s$ä¸²çš„ç¬¬$a_i$ä¸ªå­—ç¬¦æˆ–è€…ç¬¬$(m+1-a_i)$ä¸ªå­—ç¬¦æ”¹æˆ<code>A</code>ã€‚ï¼ˆæ³¨æ„ï¼Œä½ å¯ä»¥å¯¹åŒä¸€ä¸ªä½ç½®è¿›è¡Œè‹¥å¹²æ¬¡æ“ä½œï¼‰</li></ul><p>æ‰¾åˆ°$n$æ¬¡æ“ä½œåï¼Œä½ èƒ½å¾—åˆ°çš„å­—å…¸åºæœ€å°çš„ä¸²$s$</p><p>*æœ¬é¢˜æœ‰å¤šç»„æ•°æ®$(t\le2000)$ï¼Œå¯¹äºæ¯ç»„æ•°æ®$1\le n,m \le50$</p><h3 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h3><p>ç­¾åˆ°é¢˜ã€‚æ˜¾ç„¶æ•°åˆ—${a_n}$çš„é¡ºåºä¸ç­”æ¡ˆæ²¡æœ‰å…³ç³»ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘è´ªå¿ƒï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼˜å…ˆå°†é å‰çš„ä½ç½®æ¢æˆ<code>A</code>ï¼Œå¦‚æœé å‰çš„ä½ç½®å·²ç»è¢«æ›´æ¢äº†ï¼Œå°±æ¢å¦ä¸€ä¸ªï¼Œå¦‚æœä¸¤ä¸ªéƒ½è¢«æ›´æ¢è¿‡å½“ç„¶è¿™æ¬¡æ“ä½œæ— è®ºå¦‚ä½•éƒ½æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span><span class="token keyword">int</span> cnt<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">char</span> str<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>cnt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">memset</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>        str<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> v<span class="token punctuation">;</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            v <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> m <span class="token operator">-</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// vå’Œm-v+1çš„æ“ä½œé€‰æ‹©æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±å–å°çš„å­˜ä¸‹æ¥</span>            cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œæˆ‘ç”¨çš„æ¡¶å­˜ai</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// å®é™…ä¸Šå½“i&gt;m/2æ—¶cnt[i]å°±æ’ä¸º0äº†</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> str<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span> <span class="token comment">// ä¼˜å…ˆæŠŠé å‰çš„æ¢ä¸ºA</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> str<span class="token punctuation">[</span>m <span class="token operator">-</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœä¸æ­¢1æ¬¡æ›´æ¢æœºä¼šï¼Œå°±æŠŠé åçš„ä¹Ÿæ¢æ‰</span>        <span class="token punctuation">}</span>        <span class="token function">puts</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Bé¢˜"><a href="#Bé¢˜" class="headerlink" title="Bé¢˜"></a>Bé¢˜</h2><h3 id="é¢˜ç›®å¤§æ„-1"><a href="#é¢˜ç›®å¤§æ„-1" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>æœ‰ä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•°åˆ—æ•°åˆ—${c_i}$ï¼Œå…¶å€¼ä¸ºä¸è¶…è¿‡$n$çš„æ­£æ•´æ•°ã€‚</p><p>ç°åœ¨å¯¹æ¯ä¸ª$c_i$ä¾æ¬¡è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><ul><li>å¯¹$c_1$ï¼Œä½ å°†å®ƒæ”¾åœ¨$(0,0)$ç‚¹</li><li>å¯¹$c_i(2\le i\le n)$ï¼Œè®°$c_{i-1}$æ”¾åœ¨äº†$(x,y)$ç‚¹ï¼Œåˆ™ä½ å¯ä»¥å°†$c_i$æ”¾åœ¨$(x+1,y)$æˆ–$(x-1,y)$æˆ–$(x,y+1)$ï¼ˆä½†æ˜¯ä¸èƒ½æ”¾åœ¨$(x,y-1)$ï¼‰å½“ç„¶å‰ææ˜¯è¿™äº›åœ°æ–¹ä¹‹å‰æ²¡æœ‰æ”¾ç½®è¿‡å…¶ä»–çš„$c_i$</li></ul><p>è‹¥å¯¹äºæŸä¸ª$(x,y)$å’ŒæŸä¸ª$s$ï¼Œè‹¥$(x,y),(x,y+1),\cdots,(x,y+s-1)$è¢«æ”¾ç½®äº†å€¼ç›¸åŒçš„$c_i$ï¼Œåˆ™å®šä¹‰è¿™äº›ç‚¹ç»„æˆäº†ä¸€ä¸ªâ€œå¡”â€ã€‚å®šä¹‰â€œå¡”â€çš„é«˜æ˜¯$s$ï¼Œâ€œå¡”â€è¢«æ”¾ç½®åœ¨äº†$(x,y)$å¤„ï¼Œâ€œå¡”â€çš„é¢œè‰²ä¸ºè¿™äº›ç›¸åŒçš„$c_i$çš„å€¼ã€‚</p><p>å¯¹äºæ¯ä¸€ä¸ªä¸è¶…è¿‡$n$çš„æ­£æ•´æ•°$r$ï¼Œ<strong>ç‹¬ç«‹</strong>çš„è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>æ‰¾åˆ°ä½ èƒ½æŒ‰è§„åˆ™æ„é€ å‡ºçš„ï¼Œé¢œè‰²ä¸º$r$â€‹çš„ï¼Œé«˜åº¦æœ€é«˜çš„â€œå¡”â€ã€‚</li></ul><p>*æœ¬é¢˜æœ‰å¤šç»„æ•°æ®$(t \le 10^4)$ï¼Œæ¯ç»„æ•°æ®æ»¡è¶³$n \le 10^5$ï¼Œå¯¹äºå…¨éƒ¨æ•°æ®$\sum n \le 2 \cdot 10^5$</p><h3 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h3><p>æ³¨æ„åˆ°é¢˜ç›®è¦æ±‚æˆ‘ä»¬<strong>ç‹¬ç«‹</strong>çš„å¤„ç†æ¯ä¸€ä¸ª$r$è€Œä¸”åªéœ€è¦æ‰¾å‡ºæœ€é«˜çš„â€œå¡”â€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘å¯¹äºå›ºå®šçš„$r$ï¼Œè´ªå¿ƒçš„å¸Œæœ›æ¯ä¸ª$r$éƒ½èƒ½åˆšå¥½æ­åœ¨ä¸Šä¸€ä¸ª$r$ä¸Šã€‚æŠ½è±¡åŒ–çš„ï¼Œè®°$c_i=c_j=r(i &lt; j)$ï¼Œä»€ä¹ˆæƒ…å†µä¸‹$c_i$å’Œ$c_j$å¯ä»¥ç»„æˆä¸€ä¸ªâ€œå¡”â€å‘¢ï¼Ÿ</p><p>è¿›è¿‡ç®€å•çš„æ¨ç†å¯ä»¥è¯æ˜ï¼Œå½“ä¸”ä»…å½“$(j-i)$ä¸ºå¥‡æ•°æ—¶ï¼Œ$c_i$å’Œ$c_j$èƒ½æ„æˆä¸€ä¸ªâ€œå¡”â€ã€‚</p><blockquote><p>å¿…è¦æ€§è¯æ˜è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><p>è‹¥$c_i$è¢«æ”¾ç½®åœ¨$(x,y)$å¤„ï¼Œåˆ™è®°$Q(c_i)=x+y$</p><p>åˆ™æ ¹æ®é¢˜æ„æœ‰$Q(c_{i+1})=x+y\pm1$ï¼Œå³$Q(c_{i+1}) \equiv Q(c_i) + 1 \ (mod\ 2)$</p><p>æ‰€ä»¥$Q(c_j) \equiv Q(c_i) + j - i \ (mod \ 2)$</p><p>å› ä¸º$c_j$å’Œ$c_i$æ„æˆâ€œå¡”â€ï¼Œæ‰€ä»¥$Q(c_j)-Q(c_i)=1$</p><p>äºæ˜¯æœ‰$j-i \equiv 1 \ (mod \ 2)$ï¼Œå³$(j-i)$æ˜¯å¥‡æ•°</p><p>å……åˆ†æ€§è¯æ˜ç•¥ï¼Œå› ä¸ºåªéœ€è¦ç»™å‡ºä¸€ä¸ªç®€å•çš„æ„é€ ï¼Œè¿™é‡Œå°±ç•™ç»™è¯»è€…å§~</p></blockquote><p>é‚£ä¹ˆå½“$(j-i)$æ˜¯å¶æ•°çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿç”±äº$c_i$ä¸‹é¢å¯èƒ½å·²ç»æˆå¡”äº†ï¼Œä½†æ˜¯$c_j$å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥å½“å‡ºç°$c_k=r$è€Œä¸”$(k-i)$æ˜¯å¥‡æ•°æ—¶ï¼ˆæ­¤æ—¶æ˜¾ç„¶$(k-j)$ä¹Ÿæ˜¯å¥‡æ•°ï¼‰å°†$c_k$æ”¾åœ¨$c_i$çš„ä¸Šé¢ä¸ºâ€œå¡”â€å¡«ä¸€å±‚æ¥¼æ˜¯æ›´ä¼˜çš„ã€‚</p><p>å› æ­¤æœ¬é¢˜åªéœ€è¦è®°å½•ç¬¬ä¸€ä¸ª$c_i=r$çš„$i$å€¼ï¼Œç„¶åä¹‹åä¸€æ—¦ç¢°è§$c_j=c_i$è€Œä¸”$(j-i)$æ˜¯å¥‡æ•°æ—¶å°±<code>ans++</code>å³å¯ã€‚</p><p>æœ€åå¯ä»¥çœ‹å‡ºï¼Œå¯¹äºä¸åŒçš„$r$ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶è¿›è¡Œè®¡ç®—ï¼Œè‡³æ­¤æœ¬é¢˜è§£å†³ã€‚</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> c<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span> cnt<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span> lst<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> lst<span class="token punctuation">[</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> lst<span class="token punctuation">[</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>                cnt<span class="token punctuation">[</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>            lst<span class="token punctuation">[</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Cé¢˜"><a href="#Cé¢˜" class="headerlink" title="Cé¢˜"></a>Cé¢˜</h2><h3 id="é¢˜ç›®å¤§æ„-2"><a href="#é¢˜ç›®å¤§æ„-2" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šé•¿åº¦ä¸º$n$çš„æ­£æ•´æ•°åˆ—${h_i}$ï¼Œä½ å¯ä»¥èŠ±è´¹ä»£ä»·å¢å¤§å…¶ä¸­çš„å€¼ï¼Œæ¯èŠ±è´¹$1$ç‚¹ä»£ä»·å¯ä»¥å°†ä¸€ä¸ª$h_i$å¢å¤§$1$ã€‚</p><p>æè¿°$h_i$æ˜¯â€œå¥½çœ‹çš„â€ï¼Œå½“ä¸”ä»…å½“$i\neq 1$ä¸”$i\neq n$ä¸”$h_i &gt; h_{i-1}$ä¸”$h_i &gt; h_{i+1}$ã€‚</p><p>è¦æ±‚åœ¨ä¿è¯æ•´ä¸ªæ•°åˆ—â€œå¥½çœ‹çš„â€$h_i$æœ€å¤šçš„æƒ…å†µä¸‹èŠ±è´¹çš„æœ€å°ä»£ä»·ã€‚</p><p>*æœ¬é¢˜æœ‰å¤šç»„æ•°æ®$(t \le 10^4)$ï¼Œå¯¹äºæ¯ç»„æ•°æ®$3 \le n \le 10^5$ï¼Œ$h_i \le 10^9$ï¼Œå¯¹äºå…¨éƒ¨æ•°æ®$\sum n \le 2 \cdot 10^5$</p><h3 id="è§£æ-2"><a href="#è§£æ-2" class="headerlink" title="è§£æ"></a>è§£æ</h3><p>é¦–å…ˆè‚¯å®šè¦è€ƒè™‘å¦‚ä½•è®©â€œå¥½çœ‹çš„â€$h_i$æœ€å¤šã€‚æ ¹æ®é¢˜æ„ï¼Œâ€œå¥½çœ‹çš„â€$h_i$æ— æ³•è¿ç»­å‡ºç°ï¼Œä¹Ÿä¸èƒ½å‡ºç°åœ¨æ”¶å°¾ï¼Œæ‰€ä»¥å¿…ç„¶å¯ä»¥ä½¿å¾—è€Œä¸”æœ€å¤šåªèƒ½ä½¿å¾—$\lfloor\frac{n-1}{2}\rfloor$ä¸ª$h_i$æˆä¸ºâ€œå¥½çœ‹çš„â€ã€‚è€Œä¸”å½“$n$æ˜¯å¥‡æ•°æ—¶å¾ˆå®¹æ˜“è§£å†³ï¼Œå› ä¸ºå¿…ç„¶å¾—æ˜¯æ‰€æœ‰çš„$h_{2i}$éƒ½æ˜¯â€œå¥½çœ‹çš„â€ã€‚æ‰€ä»¥æ¥ä¸‹æ¥é‡ç‚¹è®¨è®ºå½“$n$æ˜¯å¶æ•°çš„æƒ…å†µã€‚</p><p>å¯ä»¥æ³¨æ„åˆ°ï¼Œ$n$æ˜¯å¶æ•°æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ª$k$ï¼Œä½¿å¾—$i&lt;k$æ—¶ï¼Œå½“$i$æ˜¯å¶æ•°æ—¶$h_i$æ˜¯â€œå¥½çœ‹çš„â€ï¼Œå½“$i&gt;k$æ—¶ï¼Œå½“$i$æ˜¯å¥‡æ•°æ—¶$h_i$æ˜¯â€œå¥½çœ‹çš„â€ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘è¿›è¡Œdpã€‚</p><p>è®¾<code>dp[i]</code>ä½¿å¾—$h_i$æ˜¯å¥½çœ‹çš„å‰æä¸‹ï¼Œä¿è¯å‰$i$ä¸ª$h_i$ä¸­çš„â€œçœ‹å¥½çš„â€æ•°æœ€å¤šï¼Œéœ€è¦çš„æœ€å°‘èŠ±è´¹ï¼Œé‚£ä¹ˆæœ€ç»ˆç­”æ¡ˆå°±æ˜¯<code>min(dp[n-2],dp[n-1])</code>ã€‚ä¸‹é¢è€ƒè™‘å¦‚ä½•è½¬ç§»ã€‚è¿›è¿‡æˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºï¼Œå¯ä»¥çŸ¥é“ï¼Œå½“$i$æ˜¯å¶æ•°æ—¶ï¼Œå‰é¢ä¸€ä¸ªå¥½çœ‹çš„æ•°å¿…ç„¶æ˜¯å¶æ•°ï¼Œå½“$i$æ˜¯å¥‡æ•°æ—¶åˆ™æ—¢å¯èƒ½æ˜¯å¥‡æ•°æœ‰å¯èƒ½æ˜¯å¶æ•°ï¼Œäºæ˜¯è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>h<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// wå°±æ˜¯å˜æˆâ€œå¥½çœ‹çš„â€çš„ä»£ä»·</span><span class="token keyword">if</span><span class="token punctuation">(</span>w <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> w<span class="token punctuation">;</span><span class="token keyword">else</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæœ¬é¢˜éœ€è¦å¼€<code>long long</code></p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">long</span> <span class="token keyword">long</span> ans<span class="token punctuation">,</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>h<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>w <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> ans <span class="token operator">+=</span> w<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>h<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>w <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> w<span class="token punctuation">;</span>            <span class="token keyword">else</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Dé¢˜"><a href="#Dé¢˜" class="headerlink" title="Dé¢˜"></a>Dé¢˜</h2><h3 id="é¢˜ç›®å¤§æ„-3"><a href="#é¢˜ç›®å¤§æ„-3" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šé•¿åº¦ä¸º$n$çš„æ­£æ•´æ•°åˆ—${a_n}$ä»¥åŠæ­£æ•´æ•°$k$ï¼Œå¯»æ‰¾ä¸€ä¸ªé•¿åº¦ä¸º$n$ï¼Œå€¼ä¸è¶…è¿‡$k$çš„æ­£æ•´æ•°åˆ—${p_n}$ï¼Œä½¿å¾—ä¸‹é¢è¿™ä¸ªå¼å­çš„å€¼æœ€å°<br>$$<br>\max_{1 \le i \le n}(\lfloor\frac{a_i}{p_i}\rfloor)-\min_{1 \le i \le n}(\lfloor\frac{a_i}{p_i}\rfloor)<br>$$<br>æœ€åé¢˜ç›®åªè¦æ±‚è¾“å‡ºä¸Šé¢è¿™ä¸ªå¼å­å¯èƒ½çš„æœ€å°å€¼ï¼Œä¸éœ€è¦è¾“å‡ºå¯¹åº”${p_n}$</p><p>*æœ¬é¢˜åˆ†ä¸ºD1å’ŒD2ï¼Œä»…ä»…æ˜¯æ•°æ®èŒƒå›´ä¸åŒ</p><p>*D1èŒƒå›´ï¼šæœ‰å¤šç»„æ•°æ®$(t \le 100)$ï¼Œå¯¹äºæ¯ç»„æ•°æ®$n,k,a_n \le 3000$ï¼Œä¸”ä¿è¯${a_n}$å•è°ƒä¸å‡ï¼Œä¸”å¯¹äºå…¨éƒ¨æ•°æ®$\sum n \le 3000$</p><p>*D2èŒƒå›´ï¼šæœ‰å¤šç»„æ•°æ®$(t \le 100)$ï¼Œå¯¹äºæ¯ç»„æ•°æ®$n,k,a_n \le 10^5$ï¼Œä¸”ä¿è¯${a_n}$å•è°ƒä¸å‡ï¼Œä¸”å¯¹äºå…¨éƒ¨æ•°æ®$\sum n \le 10^5$</p><h3 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ 1"></a>è§£æ 1</h3><p>å…ˆè€ƒè™‘D1æ€ä¹ˆåšï¼Œè¿™é‡Œæ ¹æ®èŒƒå›´å¯ä»¥çŒœæƒ³å­˜åœ¨$O(n^2)$çš„åšæ³•å¯ä»¥é€šè¿‡D1ã€‚æ˜¾ç„¶éå†æ‰€æœ‰çš„${p_n}$æ˜¯éå¸¸ä¸ç°å®çš„ï¼Œå› ä¸ºå¤æ‚åº¦å°†è¾¾åˆ°$O(k^n)$ï¼Œååˆ†ææ€–ã€‚</p><p>è§‚å¯Ÿè¦æ±‚çš„å¼å­ï¼Œå¦‚æœæˆ‘ä»¬ä»¤$M=\max_{1 \le i \le n}(\lfloor\frac{a_i}{p_i}\rfloor)$ä»¥åŠ$m=\min_{1 \le i \le n}(\lfloor\frac{a_i}{p_i}\rfloor)$ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥è€ƒè™‘éå†$M$ï¼ˆä»$a_n$éå†åˆ°$\lfloor\frac{a_n}{k}\rfloor$ï¼‰ï¼Œç„¶åå¯¹äºæ¯ä¸ª$M$å°½å¯èƒ½çš„é€‰å–è¾ƒå¤§çš„$m$å³å¯ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><p>å¯¹äºå›ºå®š$M$å’Œæ¯ä¸€ä¸ª$a_i$ï¼Œä¸ºäº†ä½¿å¾—$m$æœ€å¤§ï¼Œåˆ™å¿…é¡»è®©æ¯ä¸ª$\lfloor\frac{a_i}{p_i}\rfloor$å°½é‡å¤§ï¼Œå³$p_i$å°½é‡å°ï¼Œå³æœ‰$\lfloor\frac{a_i}{p_i}\rfloor \le M$ä½†æ˜¯$\lfloor\frac{a_i}{p_i-1}\rfloor &gt; M$ï¼Œå¦‚æœè®°$a_i = kM + r(0\le r &lt; M)$å¯ä»¥è§£å‡º$p_i = k (0 \le r &lt; k)$æˆ–è€…$p_i = k + 1 (k \le r &lt; M)$ã€‚å€Ÿæ­¤æˆ‘ä»¬å°±å¯ä»¥ä»¥$O(n^2)$çš„å¤æ‚åº¦è¿‡D1ã€‚</p><h3 id="ä»£ç 1"><a href="#ä»£ç 1" class="headerlink" title="ä»£ç 1"></a>ä»£ç 1</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">3e3</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> inf <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> k<span class="token punctuation">,</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">/</span> k <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ans <span class="token operator">=</span> inf<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> max_val <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span> max_val <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> max_val<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> min_val <span class="token operator">=</span> inf<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">int</span> p <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> max_val<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> p <span class="token operator">&gt;</span> max_val<span class="token punctuation">)</span> p<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">&gt;</span> k<span class="token punctuation">)</span> p <span class="token operator">=</span> k<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> p <span class="token operator">&gt;</span> max_val<span class="token punctuation">)</span> <span class="token punctuation">{</span> min_val <span class="token operator">=</span> inf<span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                min_val <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>min_val<span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>min_val <span class="token operator">&lt;=</span> max_val<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> max_val <span class="token operator">-</span> min_val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è§£æ2"><a href="#è§£æ2" class="headerlink" title="è§£æ2"></a>è§£æ2</h3><p>æ²¿ç”¨D1çš„æ€è·¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å¯ä»¥åœ¨$O(log n)$çš„å¤æ‚åº¦å†…æ‰¾å‡ºç»™å®š$M$æƒ…å†µä¸‹çš„æœ€å¤§$m$ã€‚</p><p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦å…ˆå›è¿‡å¤´æ¥çœ‹çœ‹å¼å­ï¼Œ$\lfloor\frac{a_i}{p_i}\rfloor \le M$ä½†æ˜¯$\lfloor\frac{a_i}{p_i-1}\rfloor &gt; M$ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬ä¸è§£å‡º$p_i$è€Œæ˜¯åè€Œè§£å‡º$a_i$ï¼Œäºæ˜¯æœ‰$(M+1)(p_i-1)\le a_i &lt; (M+1)p_i$ã€‚ç”±äºå¯¹äºç›¸åŒçš„$p_i$å½“ç„¶æ˜¯$a_i$è¶Šå°æ‰èƒ½å½±å“åˆ°$m$çš„å€¼ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸€ä¸ª$M$ï¼Œéå†$p$ï¼ˆä»1å¼€å§‹ç›´åˆ°$(p+1)\cdot(M+1)&gt;a_n$ä¸ºæ­¢ï¼‰ï¼Œç„¶åå¯¹äºæ¯ä¸€ä¸ª$p$ï¼Œå¯ä»¥ç”¨äºŒåˆ†çš„æ–¹å¼ï¼ˆå› ä¸º$a_n$æœ‰åºï¼‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äº$(M+1)(p_i-1)$çš„$a_i$ï¼Œç”¨$\lfloor\frac{a_i}{p}\rfloor$æ›´æ–°$m$ï¼ˆå–minï¼‰ã€‚</p><p>äºæ˜¯å¤æ‚åº¦æ¥åˆ°äº†$O(\sum\frac{n}{i}log n)$ï¼Œå¯ä»¥è¯æ˜$O(\sum\frac{n}{i})=O(nlogn)$æ‰€ä»¥æ€»çš„å¤æ‚åº¦æ˜¯$O(nlog^2n)$ã€‚ä½†æ˜¯è¿™ä¸ªå¤æ‚åº¦å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼ˆè™½ç„¶å¯¹äº1e5çš„æ•°æ®å·²ç»è¶³å¤Ÿäº†ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘é¢„å¤„ç†è€Œéæ¯æ¬¡éƒ½äºŒåˆ†æ¥å¯»æ‰¾$a_i$ï¼Œè¿™ä½¿å¾—å¤æ‚åº¦é™åˆ°$O(nlogn)$ã€‚</p><h3 id="ä»£ç 2"><a href="#ä»£ç 2" class="headerlink" title="ä»£ç 2"></a>ä»£ç 2</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> inf <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> k<span class="token punctuation">,</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans<span class="token punctuation">,</span> max_val<span class="token punctuation">,</span> min_val<span class="token punctuation">;</span><span class="token keyword">int</span> great_min<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> k <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        n <span class="token operator">=</span> <span class="token function">unique</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> a<span class="token punctuation">;</span> <span class="token comment">// å»é‡ï¼Œæ˜¾ç„¶é‡å¤çš„aiå¯¹æœ¬é¢˜æ— å½±å“ï¼Œå½“ç„¶è¿™ä¸ªè¯­å¥æœ¬æ¥ä¹Ÿä¸æ˜¯å¿…é¡»çš„</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span>p <span class="token operator">=</span> a<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>p <span class="token operator">&lt;</span> i<span class="token punctuation">)</span> p<span class="token operator">++</span><span class="token punctuation">;</span>            great_min<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span> <span class="token comment">// é¢„å¤„ç†ï¼Œå³great_min[x]è¡¨ç¤ºä¸å°äºxçš„æœ€å°çš„ai</span>        <span class="token punctuation">}</span>        max_val <span class="token operator">=</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> min_val <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        ans <span class="token operator">=</span> max_val <span class="token operator">-</span> min_val<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>max_val <span class="token operator">&gt;=</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> k<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">*</span> <span class="token punctuation">(</span>max_val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// è¿™é‡Œiå…¶å®æ˜¯éå†çš„(p-1)</span>            <span class="token punctuation">{</span>                min_val <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>min_val<span class="token punctuation">,</span> great_min<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token punctuation">(</span>max_val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> max_val <span class="token operator">-</span> min_val<span class="token punctuation">)</span><span class="token punctuation">;</span>            max_val<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Eé¢˜"><a href="#Eé¢˜" class="headerlink" title="Eé¢˜"></a>Eé¢˜</h2><h3 id="é¢˜ç›®å¤§æ„-4"><a href="#é¢˜ç›®å¤§æ„-4" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h3><p>ç»™å®šä¸€ä¸ª$n$ä¸ªç‚¹$m$æ¡è¾¹çš„æ— å‘æ— æƒè¿é€šå›¾ï¼Œç‚¹ç¼–å·ä»1åˆ°nï¼Œè¾¹ç¼–å·ä»1åˆ°mã€‚</p><p>ç»™å‡º$q$æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®åŒ…æ‹¬ä¸¤ä¸ªæ­£æ•´æ•°$l$å’Œ$r$ã€‚ä½ éœ€è¦æ‰¾åˆ°ä½ ä¸€ä¸ªæœ€å°çš„æ»¡è¶³ä¸‹åˆ—è¦æ±‚çš„$k$ï¼š</p><ul><li>å¯¹ä»»ä½•æ»¡è¶³$l \le a \le b \le r$çš„ç‚¹å¯¹$(a,b)$ï¼Œç‚¹$a$å’Œç‚¹$b$å¯ä»¥åªä½¿ç”¨å‰$k$æ¡è¾¹ï¼ˆå³ç¼–å·ä»1åˆ°kçš„è¾¹ï¼‰çš„æƒ…å†µä¸‹è¿é€š</li></ul><p>*æœ¬é¢˜æœ‰å¤šç»„æ•°æ®$(t \le 1000)$ï¼Œå¯¹æ¯ä¸ªæ•°æ®$n\le10^5$ï¼Œ$m,q\le2\cdot10^5$ï¼Œå¯¹å…¨éƒ¨æ•°æ®$\sum n\le10^5$ï¼Œ$\sum m,\sum q\le2\cdot10^5$</p><h3 id="è§£æ-3"><a href="#è§£æ-3" class="headerlink" title="è§£æ"></a>è§£æ</h3><p>æœ¬é¢˜ç¬¬ä¸€çœ¼çœ‹çš„æ—¶å€™æœ‰ä¸€ç§äºŒåˆ†ç­”æ¡ˆ+å¯æŒç»­åŒ–å¹¶æŸ¥é›†çš„æ„Ÿè§‰ã€‚ç„¶è€Œå¯æƒœçš„æ˜¯ï¼Œæ¯æ¬¡è¯¢é—®ä¸æ˜¯æ£€æŸ¥ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€šï¼Œè€Œæ˜¯æ£€æŸ¥ä¸€ä¸ªåŒºé—´æ˜¯å¦è¿é€šã€‚é‚£ä¹ˆæåˆ°åŒºé—´ï¼Œå°±å¯ä»¥æƒ³åˆ°ä¸€ç§åšæ³•æ˜¯å€å¢ã€‚è€Œä¸”æˆ‘ä»¬æƒŠäººçš„å‘ç°ä¸¤ä¸ªåŒºé—´çš„åˆå¹¶æ˜¯å¦‚æ­¤çš„ç®€å•ï¼Œåªè¦æœ‰å…¬å…±ç‚¹ï¼Œä¸¤ä¸ªåŒºé—´åˆå¹¶å°±æ˜¯å¯¹$k$å–maxã€‚äºæ˜¯é—®é¢˜è½¬åŒ–ä¸ºå¦‚ä½•æ±‚å¾—æ¯ä¸¤ä¸ªç›¸é‚»ç‚¹çš„$k$ã€‚</p><p>è½¬åŒ–åˆ°è¿™ä¸ªåœ°æ­¥äº†ï¼Œå½“ç„¶å¯ä»¥ç›´æ¥äºŒä»½ç­”æ¡ˆ+å¯æŒç»­åŒ–å¹¶æŸ¥é›†ï¼Œå¯æ˜¯å¤æ‚åº¦å°†æ¥åˆ°3ä¸ªlogï¼Œè€Œä¸”å†™èµ·æ¥è¿˜å¾ˆéº»çƒ¦ï¼Œæ ¹æœ¬ç”¨ä¸ç€ã€‚äºæ˜¯è€ƒè™‘åªä½¿ç”¨æ™®é€šçš„å¹¶æŸ¥é›†ï¼Œè€Œä¸”ä¸ç”¨è·¯å¾„å‹ç¼©ï¼Œè€Œæ˜¯æ”¹ä¸ºå¯å‘å¼åˆå¹¶çš„å¹¶æŸ¥é›†ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æ¯åŠ ä¸€æ¡è¾¹çš„æ—¶å€™ï¼Œéƒ½åªæ£€æŸ¥å°é›†åˆé‡Œé¢çš„æ‰€æœ‰ç‚¹æœ‰æ²¡æœ‰å’Œç›¸é‚»çš„ç‚¹ç›¸è¿ã€‚å¤æ‚åº¦æ˜¯$O(nlogn)$ã€‚</p><p>äºæ˜¯æœ¬é¢˜æ€»å¤æ‚åº¦ä¸º$O(nlogn+nlogn+qlogn)$å³$O((n+q)logn)$</p><h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">debug</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> cerr <span class="token operator">&lt;&lt;</span> #x <span class="token operator">&lt;&lt;</span> </span><span class="token string">" = "</span> <span class="token expression"><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> c_pow2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">8192</span><span class="token punctuation">,</span> <span class="token number">16384</span><span class="token punctuation">,</span> <span class="token number">32768</span><span class="token punctuation">,</span> <span class="token number">65536</span><span class="token punctuation">,</span> <span class="token number">131072</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> q<span class="token punctuation">;</span><span class="token keyword">int</span> fa<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ans<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> forest<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">c_log2</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span>c_pow2<span class="token punctuation">,</span> c_pow2 <span class="token operator">+</span> <span class="token number">18</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">-</span> c_pow2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token operator">&amp;</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            fa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>forest<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>u<span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fa<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>forest<span class="token punctuation">[</span>fa<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> forest<span class="token punctuation">[</span>fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> fa_v <span class="token operator">=</span> fa<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> forest<span class="token punctuation">[</span>fa_v<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>                forest<span class="token punctuation">[</span>fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> forest<span class="token punctuation">[</span>fa_v<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> ans<span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> fa<span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> ans<span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> n <span class="token operator">&amp;&amp;</span> ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> fa<span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>forest<span class="token punctuation">[</span>fa_v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>forest<span class="token punctuation">[</span>fa<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> pk <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> c_pow2<span class="token punctuation">[</span>pk<span class="token punctuation">]</span> <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> pk<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>c_pow2<span class="token punctuation">[</span>pk<span class="token punctuation">]</span> <span class="token operator">+</span> i <span class="token operator">&gt;</span> n<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>                ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>pk<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>pk<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>i<span class="token operator">+</span>c_pow2<span class="token punctuation">[</span>pk<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pk<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">;</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> <span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> pk <span class="token operator">=</span> <span class="token function">c_log2</span><span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>pk<span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>r<span class="token operator">-</span>c_pow2<span class="token punctuation">[</span>pk<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pk<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç«èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ç”Ÿè¯„æ•™è‡ªåŠ¨åŒ–è„šæœ¬</title>
      <link href="posts/evaluation-automation-script.html"/>
      <url>posts/evaluation-automation-script.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è„šæœ¬å†…å®¹"><a href="#è„šæœ¬å†…å®¹" class="headerlink" title="è„šæœ¬å†…å®¹"></a>è„šæœ¬å†…å®¹</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">javascript</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token function">ttj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    firrr<span class="token operator">=</span>window<span class="token punctuation">.</span>top<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"iframename"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow<span class="token punctuation">;</span>    firrr<span class="token punctuation">.</span><span class="token function-variable function">alert</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    firrr<span class="token punctuation">.</span><span class="token function-variable function">confirm</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    a<span class="token operator">=</span>firrr<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name^=tabmapzb]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    b<span class="token operator">=</span>firrr<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"span.yellow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length<span class="token operator">!==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>        b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">var</span> selections <span class="token operator">=</span> firrr<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i<span class="token operator">&lt;</span> selections<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        selections<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    firrr<span class="token punctuation">.</span><span class="token function">tj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>firrr<span class="token operator">=</span>window<span class="token punctuation">.</span>top<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"iframename"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contentWindow<span class="token punctuation">;</span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token string">"firrr.$.onload = ttj()"</span><span class="token punctuation">,</span><span class="token number">1400</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ol><li>ç™»å½•<a href="http://jwxt.buaa.edu.cn:8080/ieas2.1">æ•™åŠ¡ç³»ç»Ÿ</a></li><li>è¯·å‹¿æ›´æ”¹ä¸»é¢˜è®¾ç½®</li><li>åœ¨â€œæ•™å­¦è¯„ä»·â€ä¸­æ‰¾åˆ°â€œå­¦ç”Ÿè¯„æ•™â€</li><li>ç‚¹å‡»â€œå¼€å§‹è¯„æ•™â€ï¼Œè¿›å…¥ä¸‹é¢è¿™ä¸ªç•Œé¢<img src="https://s2.loli.net/2022/07/04/WhLMwfmr4j9qpyO.png"></li><li>æŒ‰F12æ‰“å¼€æ§åˆ¶å°ï¼Œå¹¶æ‰¾åˆ°Consoleæˆ–è€…â€œæ§åˆ¶å°â€</li><li>åœ¨æ§åˆ¶å°ä¸­ç²˜è´´ä»£ç å¹¶å›è½¦è¿è¡Œ</li><li>è¯„æ•™å…¨éƒ¨å®Œæˆååˆ·æ–°ç½‘é¡µå³å¯</li></ol><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>åœ¨é™„ä¸Šä¸€ä¸ªå¯ä»¥æå‰ä¸‹è½½è¯¾è¡¨çš„ç¥å¥‡ä»£ç </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ele <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#iframename"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"#xnxq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">"2022ç§‹å­£"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å‘ç°ç›®æ ‡ï¼Œæ­£åœ¨ç­‰å¾…ä¸‹è½½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ele<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"iframe"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">exportExcel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è„šæœ¬ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è„šæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯2022å†³èµ›å‚èµ›è®°å½•</title>
      <link href="posts/lanqiaocup2022final.html"/>
      <url>posts/lanqiaocup2022final.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="A-é¢˜ï¼šå°è“ä¸é’¥åŒ™"><a href="#A-é¢˜ï¼šå°è“ä¸é’¥åŒ™" class="headerlink" title="A é¢˜ï¼šå°è“ä¸é’¥åŒ™"></a>A é¢˜ï¼šå°è“ä¸é’¥åŒ™</h1><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>å°è“æ˜¯å¹¼å„¿å›­çš„è€å¸ˆï¼Œä»–çš„ç­ä¸Šæœ‰ 28 ä¸ªå­©å­ï¼Œä»Šå¤©ä»–å’Œå­©å­ä»¬ä¸€èµ·è¿›è¡Œäº†ä¸€ä¸ªæ¸¸æˆã€‚</p><p>å°è“æ‰€åœ¨çš„å­¦æ ¡æ˜¯å¯„å®¿åˆ¶å­¦æ ¡ï¼Œ28 ä¸ªå­©å­åˆ†åˆ«æœ‰ä¸€ä¸ªè‡ªå·±çš„æˆ¿é—´ï¼Œæ¯ä¸ªæˆ¿é—´å¯¹åº”ä¸€æŠŠé’¥åŒ™ï¼Œæ¯æŠŠé’¥åŒ™åªèƒ½æ‰“å¼€è‡ªå·±çš„é—¨ã€‚ç°åœ¨å°è“è®©è¿™ 28 ä¸ªå­©å­åˆ†åˆ«å°†è‡ªå·±å®¿èˆçš„é’¥åŒ™ä¸Šäº¤ï¼Œå†æŠŠè¿™ 28 æŠŠé’¥åŒ™éšæœºæ‰“ä¹±åˆ†ç»™æ¯ä¸ªå­©å­ä¸€æŠŠé’¥åŒ™ï¼Œæœ‰$28! = 28\times27\times \cdots \times1 $ç§åˆ†é…æ–¹æ¡ˆã€‚å°è“æƒ³çŸ¥é“è¿™äº›æ–¹æ¡ˆä¸­ï¼Œæœ‰å¤šå°‘ç§æ–¹æ¡ˆæ°æœ‰ä¸€åŠçš„å­©å­è¢«åˆ†åˆ°è‡ªå·±æˆ¿é—´çš„é’¥åŒ™ï¼ˆå³æœ‰ 14 ä¸ªå­©å­åˆ†åˆ°çš„æ˜¯è‡ªå·±æˆ¿é—´çš„é’¥åŒ™ï¼Œæœ‰ 14 ä¸ªå­©å­åˆ†åˆ°çš„ä¸æ˜¯è‡ªå·±æˆ¿é—´çš„é’¥åŒ™ï¼‰ã€‚</p></blockquote><h2 id="ç­”æ¡ˆæäº¤"><a href="#ç­”æ¡ˆæäº¤" class="headerlink" title="ç­”æ¡ˆæäº¤"></a>ç­”æ¡ˆæäº¤</h2><blockquote><p>è¿™æ˜¯ä¸€é“ç»“æœå¡«ç©ºçš„é¢˜ï¼Œä½ åªéœ€è¦ç®—å‡ºç»“æœåæäº¤å³å¯ã€‚æœ¬é¢˜çš„ç»“æœä¸ºä¸€ä¸ªæ•´æ•°ï¼Œåœ¨æäº¤ç­”æ¡ˆæ—¶åªå¡«å†™è¿™ä¸ªæ•´æ•°ï¼Œå¡«å†™å¤šä½™çš„å†…å®¹å°†æ— æ³•å¾—åˆ†ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯"><a href="#è€ƒåœºæ€è·¯" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>æ˜¾ç„¶è¿™ä¸ªé¢˜åˆ†ä¸ºä¸¤æ­¥ï¼Œä¸€æ˜¯æœ‰14ä¸ªåŒå­¦åˆ†åˆ°äº†è‡ªå·±çš„é’¥åŒ™ï¼ŒäºŒæ˜¯å‰©ä¸‹çš„14ä¸ªåŒå­¦éƒ½æ²¡æœ‰åˆ†åˆ°è‡ªå·±çš„é’¥åŒ™ï¼Œè®°æ–¹æ¡ˆæ•°ä¸º$Q$ï¼Œåˆ™æœ‰ï¼š<br>$$<br>Q = C_{28}^{14} \cdot D_{14}<br>$$<br>å…¶ä¸­$D_{14}$ä¸º14çš„å…¨é”™ä½æ’åˆ—ã€‚å…¨é”™ä½æ’åˆ—ä¹Ÿç§°â€œæ¬§æ‹‰è£…é”™ä¿¡ç®±é—®é¢˜â€ï¼Œå…¶è®¡ç®—å¯ç”¨å®¹æ–¥åŸç†ï¼Œå…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>D_n = \sum_{i=0}^{n} (-1)^i \cdot C_n^i \cdot (n-i)!<br>$$<br>æˆ–è€…ï¼š<br>$$<br>D_n = n! \cdot \sum_{i=0}^{n} \frac{(-1)^i}{i!}<br>$$<br>äºæ˜¯æœ‰æ–¹æ¡ˆæ•°$Q=1,286,583,532,342,313,400$</p><h1 id="B-é¢˜ï¼šæ’åˆ—è·ç¦»"><a href="#B-é¢˜ï¼šæ’åˆ—è·ç¦»" class="headerlink" title="B é¢˜ï¼šæ’åˆ—è·ç¦»"></a>B é¢˜ï¼šæ’åˆ—è·ç¦»</h1><h2 id="é—®é¢˜æè¿°-1"><a href="#é—®é¢˜æè¿°-1" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>å°è“æœ€è¿‘è¿·ä¸Šäº†å…¨æ’åˆ—ï¼Œç°åœ¨ä»–æœ‰ä¸€ä¸ªé•¿åº¦ä¸º 17 çš„æ’åˆ—ï¼Œé‡Œé¢åŒ…å«çš„å…ƒç´ æœ‰ï¼šabcdefghijklnopqrï¼Œå³ a è‡³ r ä¸­é™¤äº† m ä»¥å¤–çš„æ‰€æœ‰å°å†™å­—æ¯ï¼Œè¿™ 17ä¸ªå­—æ¯åœ¨ä»»ä½•ä¸€ä¸ªæ’åˆ—ä¸­éƒ½æ°å¥½å‡ºç°ä¸€æ¬¡ã€‚å‰é¢å‡ ä¸ªæ’åˆ—ä¾æ¬¡æ˜¯ï¼š</p><ul><li><p>ç¬¬ 1 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnopqrï¼›</p></li><li><p>ç¬¬ 2 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnoprqï¼›</p></li><li><p>ç¬¬ 3 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnoqprï¼›</p></li><li><p>ç¬¬ 4 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnoqrpï¼›</p></li><li><p>ç¬¬ 5 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnorpqï¼›</p></li><li><p>ç¬¬ 6 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnorqpï¼›</p></li><li><p>ç¬¬ 7 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnpoqrï¼›</p></li><li><p>ç¬¬ 8 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnporqï¼›</p></li><li><p>ç¬¬ 9 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnpqorï¼›</p></li><li><p>ç¬¬ 10 ä¸ªæ’åˆ—ä¸ºï¼šabcdefghijklnpqroã€‚</p></li></ul><p>å¯¹äºä¸€ä¸ªæ’åˆ—ï¼Œæœ‰ä¸¤ç§è½¬ç§»æ“ä½œï¼š<br>1ï¼‰è½¬ç§»åˆ°å…¶ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚å¦‚æœå½“å‰æ’åˆ—å·²ç»æ˜¯æœ€åä¸€ä¸ªæ’åˆ—ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ’åˆ—å°±æ˜¯ç¬¬ä¸€ä¸ªæ’åˆ—ã€‚<br>2ï¼‰è½¬ç§»åˆ°å…¶ä¸Šä¸€ä¸ªæ’åˆ—ã€‚å¦‚æœå½“å‰æ’åˆ—æ˜¯ç¬¬ä¸€ä¸ªæ’åˆ—ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªæ’åˆ—å°±æ˜¯æœ€åä¸€ä¸ªæ’åˆ—ã€‚<br>å°è“ç°åœ¨æœ‰ä¸¤ä¸ªæ’åˆ—ï¼Œåˆ†åˆ«ä¸ºæ’åˆ— Aï¼šaejcldbhpiogfqnkrï¼Œä»¥åŠæ’åˆ—Bï¼šncfjboqiealhkrpgdï¼Œä»–ç°åœ¨æƒ³çŸ¥é“ï¼Œåœ¨åªæœ‰ä¸Šè¿°ä¸¤ç§è½¬ç§»æ“ä½œçš„å‰æä¸‹ï¼Œæ’åˆ— A æœ€å°‘è½¬ç§»å¤šå°‘æ¬¡èƒ½å¾—åˆ°æ’åˆ— Bã€‚</p></blockquote><h2 id="ç­”æ¡ˆæäº¤-1"><a href="#ç­”æ¡ˆæäº¤-1" class="headerlink" title="ç­”æ¡ˆæäº¤"></a>ç­”æ¡ˆæäº¤</h2><blockquote><p>è¿™æ˜¯ä¸€é“ç»“æœå¡«ç©ºçš„é¢˜ï¼Œä½ åªéœ€è¦ç®—å‡ºç»“æœåæäº¤å³å¯ã€‚æœ¬é¢˜çš„ç»“æœä¸ºä¸€ä¸ªæ•´æ•°ï¼Œåœ¨æäº¤ç­”æ¡ˆæ—¶åªå¡«å†™è¿™ä¸ªæ•´æ•°ï¼Œå¡«å†™å¤šä½™çš„å†…å®¹å°†æ— æ³•å¾—åˆ†ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-1"><a href="#è€ƒåœºæ€è·¯-1" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>æ˜¾ç„¶åªè¦çŸ¥é“äº†æ’åˆ—Aå’Œæ’åˆ—Båˆ†åˆ«æ˜¯ç¬¬å‡ ä¸ªæ’åˆ—å°±å¯ä»¥äº†ã€‚</p><p>å› æ­¤æˆ‘ä»¬ä½¿ç”¨åº·æ‰˜å±•å¼€ï¼ˆCantor expansionï¼‰å°±å¯ä»¥äº†ã€‚è‹¥è®°æ’åˆ—$\lambda$ä¸º$a_1,a_2,a_3,\dots,a_n$ï¼Œåˆ™æœ‰ï¼š<br>$$<br>X_{\lambda} = q_1 \cdot (n-1)! + q_2 \cdot (n-2)! + \cdots + q_n \cdot 0!<br>$$<br>å…¶ä¸­$q_i$è¡¨ç¤º$a_i$åœ¨$a_i,a_{i+1},\dots,a_n$ä¸­æ˜¯ç¬¬$q_i$å°çš„æ•°ï¼Œåˆ™$X_\lambda$è¡¨ç¤ºæ’åˆ—$\lambda$æ˜¯ç¬¬$X_\lambda$ä¸ªæ’åˆ—ã€‚ï¼ˆæ³¨ï¼šè¿™é‡Œç¬¬å‡ å°çš„æ•°å’Œç¬¬å‡ ä¸ªæ’åˆ—éƒ½ä»0å¼€å§‹æ ‡å·ï¼Œè®¡ç®—ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼‰</p><p>æœ€åæˆ‘çš„ç»“æœæ˜¯ï¼šæ’åˆ—Açš„ç¼–å·æ˜¯$4,542,892,071,974$ï¼Œæ’åˆ—Bçš„ç¼–å·æ˜¯$254,081,962,595,831$ï¼Œæœ€ç»ˆç­”æ¡ˆå–$min{X_A - X_B + 19!, X_B - X_A} = 106,148,357,572,143$å³å¯ã€‚</p><h1 id="C-é¢˜ï¼šå†…å­˜ç©ºé—´"><a href="#C-é¢˜ï¼šå†…å­˜ç©ºé—´" class="headerlink" title="C é¢˜ï¼šå†…å­˜ç©ºé—´"></a>C é¢˜ï¼šå†…å­˜ç©ºé—´</h1><h2 id="é—®é¢˜æè¿°-2"><a href="#é—®é¢˜æè¿°-2" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>å°è“æœ€è¿‘æ€»å–œæ¬¢è®¡ç®—è‡ªå·±çš„ä»£ç ä¸­å®šä¹‰çš„å˜é‡å ç”¨äº†å¤šå°‘å†…å­˜ç©ºé—´ã€‚</p><p>ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œå˜é‡çš„ç±»å‹åªæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š<br>intï¼šæ•´å‹å˜é‡ï¼Œä¸€ä¸ª int å‹å˜é‡å ç”¨ 4 Byte çš„å†…å­˜ç©ºé—´ã€‚<br>longï¼šé•¿æ•´å‹å˜é‡ï¼Œä¸€ä¸ª long å‹å˜é‡å ç”¨ 8 Byte çš„å†…å­˜ç©ºé—´ã€‚<br>Stringï¼šå­—ç¬¦ä¸²å˜é‡ï¼Œå ç”¨ç©ºé—´å’Œå­—ç¬¦ä¸²é•¿åº¦æœ‰å…³ï¼Œè®¾å­—ç¬¦ä¸²é•¿åº¦ä¸º Lï¼Œåˆ™å­—ç¬¦ä¸²å ç”¨ L Byte çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœå­—ç¬¦ä¸²é•¿åº¦ä¸º 0 åˆ™å ç”¨ 0 Byte çš„å†…å­˜ç©ºé—´ã€‚</p><p>å®šä¹‰å˜é‡çš„è¯­å¥åªæœ‰ä¸¤ç§å½¢å¼ï¼Œç¬¬ä¸€ç§å½¢å¼ä¸ºï¼š<br><code>type var1=value1,var2=value2...;</code><br>å®šä¹‰äº†è‹¥å¹²ä¸ª type ç±»å‹å˜é‡ var1ã€var2ã€â€¦ï¼Œå¹¶ä¸”ç”¨ value1ã€value2â€¦åˆå§‹åŒ–ï¼Œ<br>å¤šä¸ªå˜é‡ä¹‹é—´ç”¨â€™,â€™ åˆ†éš”ï¼Œè¯­å¥ä»¥â€™;â€™ ç»“å°¾ï¼Œtype å¯èƒ½æ˜¯ intã€long æˆ– Stringã€‚ä¾‹å¦‚ int a=1,b=5,c=6; å ç”¨ç©ºé—´ä¸º 12 Byteï¼›long a=1,b=5; å ç”¨ç©ºé—´ä¸º 16 Byteï¼›String s1=â€â€,s2=â€helloâ€,s3=â€worldâ€; å ç”¨ç©ºé—´ä¸º 10 Byteã€‚</p><p>ç¬¬äºŒç§å½¢å¼ä¸ºï¼š<br><code>type[] arr1=new type[size1],arr2=new type[size2]...;</code><br>å®šä¹‰äº†è‹¥å¹² type ç±»å‹çš„ä¸€ç»´æ•°ç»„å˜é‡ arr1ã€arr2â€¦ï¼Œä¸”æ•°ç»„çš„å¤§å°ä¸ºsize1ã€size2â€¦ï¼Œå¤šä¸ªå˜é‡ä¹‹é—´ç”¨â€™,â€™ è¿›è¡Œåˆ†éš”ï¼Œè¯­å¥ä»¥â€™;â€™ ç»“å°¾ï¼Œtype åªå¯èƒ½æ˜¯ int æˆ– longã€‚ä¾‹å¦‚ int[] a1=new int[10]; å ç”¨çš„å†…å­˜ç©ºé—´ä¸º 40Byteï¼›long[] a1=new long[10],a2=new long[10]; å ç”¨çš„å†…å­˜ç©ºé—´ä¸º160 Byteã€‚</p><p>å·²çŸ¥å°è“æœ‰ T æ¡å®šä¹‰å˜é‡çš„è¯­å¥ï¼Œè¯·ä½ å¸®ä»–ç»Ÿè®¡ä¸‹ä¸€å…±å ç”¨äº†å¤šå°‘å†…å­˜ç©ºé—´ã€‚ç»“æœçš„è¡¨ç¤ºæ–¹å¼ä¸ºï¼š<code>aGBbMBcKBdB</code>ï¼Œå…¶ä¸­ aã€bã€cã€d ä¸ºç»Ÿè®¡çš„ç»“æœï¼ŒGBã€MBã€KBã€B ä¸ºå•ä½ã€‚ä¼˜å…ˆç”¨å¤§çš„å•ä½æ¥è¡¨ç¤ºï¼Œ1GB=1024MBï¼Œ1MB=1024KBï¼Œ1KB=1024Bï¼Œå…¶ä¸­ B è¡¨ç¤º Byteã€‚å¦‚æœ aã€bã€cã€d ä¸­çš„æŸå‡ ä¸ªæ•°å­—ä¸º 0ï¼Œé‚£ä¹ˆä¸å¿…è¾“å‡ºè¿™å‡ ä¸ªæ•°å­—åŠå…¶å•ä½ã€‚é¢˜ç›®ä¿è¯ä¸€è¡Œä¸­åªæœ‰ä¸€å¥å®šä¹‰å˜é‡çš„è¯­å¥ï¼Œä¸”æ¯æ¡è¯­å¥éƒ½æ»¡è¶³é¢˜å¹²ä¸­æè¿°çš„å®šä¹‰æ ¼å¼ï¼Œæ‰€æœ‰çš„å˜é‡åéƒ½æ˜¯åˆæ³•çš„ä¸”å‡ä¸é‡å¤ã€‚é¢˜ç›®ä¸­çš„æ•°æ®å¾ˆè§„æ•´ï¼Œå’Œä¸Šè¿°ç»™å‡ºçš„ä¾‹å­ç±»ä¼¼ï¼Œé™¤äº†ç±»å‹åé¢æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä»¥åŠå®šä¹‰æ•°ç»„æ—¶ new åé¢çš„ä¸€ä¸ªç©ºæ ¼ä¹‹å¤–ï¼Œä¸ä¼šå‡ºç°å¤šä½™çš„ç©ºæ ¼ã€‚</p></blockquote><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° T ï¼Œè¡¨ç¤ºæœ‰ T å¥å˜é‡å®šä¹‰çš„è¯­å¥ã€‚<br>æ¥ä¸‹æ¥ T è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€å¥å˜é‡å®šä¹‰è¯­å¥ã€‚</p></blockquote><h3 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><blockquote><p>è¾“å‡ºä¸€è¡ŒåŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ‰€æœ‰è¯­å¥æ‰€å ç”¨ç©ºé—´çš„æ€»å¤§å°ã€‚</p></blockquote><h2 id="æµ‹è¯•æ ·ä¾‹"><a href="#æµ‹è¯•æ ·ä¾‹" class="headerlink" title="æµ‹è¯•æ ·ä¾‹"></a>æµ‹è¯•æ ·ä¾‹</h2><table><thead><tr><th align="left">æ ·ä¾‹è¾“å…¥</th><th align="left">æ ·ä¾‹è¾“å‡º</th></tr></thead><tbody><tr><td align="left">1<br>long[] nums=new long[131072];</td><td align="left">1MB</td></tr><tr><td align="left">4<br>int a=0,b=0;<br>long x=0,y=0;<br>String s1=â€helloâ€,s2=â€worldâ€;<br>long[] arr1=new long[100000],arr2=new long[100000];</td><td align="left">1MB538KB546B</td></tr></tbody></table><h3 id="æ ·ä¾‹è¯´æ˜"><a href="#æ ·ä¾‹è¯´æ˜" class="headerlink" title="æ ·ä¾‹è¯´æ˜"></a>æ ·ä¾‹è¯´æ˜</h3><blockquote><p>æ ·ä¾‹ 1ï¼Œå ç”¨çš„ç©ºé—´ä¸º 131072 Ã— 8 = 1048576 Bï¼Œæ¢ç®—è¿‡åæ­£å¥½æ˜¯ 1MBï¼Œå…¶å®ƒä¸‰ä¸ªå•ä½ GBã€KBã€B å‰é¢çš„æ•°å­—éƒ½ä¸º 0 ï¼Œæ‰€ä»¥ä¸ç”¨è¾“å‡ºã€‚</p><p>æ ·ä¾‹ 2ï¼Œå ç”¨çš„ç©ºé—´ä¸º 4 Ã— 2 + 8 Ã— 2 + 10 + 8 Ã— 100000 Ã— 2 Bï¼Œæ¢ç®—åæ˜¯1MB538KB546Bã€‚</p></blockquote><h2 id="è§„æ¨¡ä¸çº¦å®š"><a href="#è§„æ¨¡ä¸çº¦å®š" class="headerlink" title="è§„æ¨¡ä¸çº¦å®š"></a>è§„æ¨¡ä¸çº¦å®š</h2><blockquote><p>å¯¹äºæ‰€æœ‰è¯„æµ‹ç”¨ä¾‹ï¼Œ1 â‰¤ T â‰¤ 10ï¼Œæ¯æ¡å˜é‡å®šä¹‰è¯­å¥çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ 1000ã€‚æ‰€æœ‰çš„å˜é‡åç§°é•¿åº¦ä¸ä¼šè¶…è¿‡ 10ï¼Œä¸”éƒ½ç”±å°å†™å­—æ¯å’Œæ•°å­—ç»„æˆã€‚å¯¹äºæ•´å‹å˜é‡ï¼Œåˆå§‹åŒ–çš„å€¼å‡æ˜¯åœ¨å…¶è¡¨ç¤ºèŒƒå›´å†…çš„åè¿›åˆ¶æ•´æ•°ï¼Œåˆå§‹åŒ–çš„å€¼ä¸ä¼šæ˜¯å˜é‡ã€‚å¯¹äº String ç±»å‹çš„å˜é‡ï¼Œåˆå§‹åŒ–çš„å†…å®¹é•¿åº¦ä¸ä¼šè¶…è¿‡ 50ï¼Œä¸”å†…å®¹ä»…åŒ…å«å°å†™å­—æ¯å’Œæ•°å­—ï¼Œåˆå§‹åŒ–çš„å€¼ä¸ä¼šæ˜¯å˜é‡ã€‚å¯¹äºæ•°ç»„ç±»å‹å˜é‡ï¼Œæ•°ç»„çš„é•¿åº¦ä¸ºä¸€ä¸ªæ•´æ•°ï¼ŒèŒƒå›´ä¸ºï¼š$[0, 2^{30}]$ï¼Œæ•°ç»„çš„é•¿åº¦ä¸ä¼šæ˜¯å˜é‡ã€‚T æ¡è¯­å¥å®šä¹‰çš„å˜é‡æ‰€å çš„å†…å­˜ç©ºé—´æ€»å¤§å°ä¸ä¼šè¶…è¿‡ 1 GBï¼Œä¸”å¤§äº 0 Bã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-2"><a href="#è€ƒåœºæ€è·¯-2" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>è¿™ä¸ªé¢˜ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œå‡ ä¹å°±æ˜¯çº¯æ¨¡æ‹Ÿå§å¤§æ¦‚ã€‚</p><p>é¦–å…ˆæ¯è¡Œçš„é¦–ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ç±»å‹è¯´æ˜ï¼Œç„¶åå¯¹äºä¸åŒçš„ç±»å‹æ‰¾ä¸åŒçš„ç¬¦å·å°±å¯ä»¥äº†ã€‚</p><p>æ¯”å¦‚intå’Œlongå‹ï¼Œå°±æ‰¾æœ‰å¤šå°‘ä¸ªâ€œ,â€ï¼›æ•°ç»„å°±æ‰¾â€œint[â€å’Œâ€œlong[â€ï¼›å­—ç¬¦ä¸²å°±æ‰¾â€œâ€â€å°±å¯ä»¥äº†ã€‚</p><p>éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">solve_int</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>str<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>str <span class="token operator">==</span> <span class="token string">','</span> <span class="token operator">||</span> <span class="token operator">*</span>str <span class="token operator">==</span> <span class="token string">';'</span><span class="token punctuation">)</span> ans <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>        str<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve_int_arr</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> tmp<span class="token punctuation">;</span>    <span class="token comment">// const char* lst = str + strlen(str);</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tmp <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"int["</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tmp <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span><span class="token operator">*</span>tmp<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span>tmp <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            tmp<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        ans <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve_long</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>str<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>str <span class="token operator">==</span> <span class="token string">','</span> <span class="token operator">||</span> <span class="token operator">*</span>str <span class="token operator">==</span> <span class="token string">';'</span><span class="token punctuation">)</span> ans <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>        str<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve_long_arr</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> tmp<span class="token punctuation">;</span>    <span class="token comment">// const char* lst = str + strlen(str);</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tmp <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"long["</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tmp <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span><span class="token operator">*</span>tmp<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span>tmp <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            tmp<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        ans <span class="token operator">+=</span> <span class="token number">8</span> <span class="token operator">*</span> num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve_String</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> tmp<span class="token punctuation">;</span>    <span class="token comment">// const char* lst = str + strlen(str);</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tmp <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'\"'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">// fprintf("tmp=%s\n",tmp);</span>        tmp <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>tmp <span class="token operator">!=</span> <span class="token string">'\"'</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num<span class="token operator">++</span><span class="token punctuation">;</span>            tmp<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        str <span class="token operator">=</span> tmp <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        ans <span class="token operator">+=</span> num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="D-é¢˜ï¼šæœ€å¤§å…¬çº¦æ•°"><a href="#D-é¢˜ï¼šæœ€å¤§å…¬çº¦æ•°" class="headerlink" title="D é¢˜ï¼šæœ€å¤§å…¬çº¦æ•°"></a>D é¢˜ï¼šæœ€å¤§å…¬çº¦æ•°</h1><h2 id="é—®é¢˜æè¿°-3"><a href="#é—®é¢˜æè¿°-3" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©æ•°ç»„ä¸­ä»»æ„ä¸¤ä¸ªç›¸é‚»çš„å…ƒç´  x, y å¹¶å°†å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ æ›¿æ¢ä¸º gcd(x, y) ï¼Œå…¶ä¸­ gcd(x, y) è¡¨ç¤º x å’Œ y çš„æœ€å¤§å…¬çº¦æ•°ã€‚</p><p>è¯·é—®æœ€å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½è®©æ•´ä¸ªæ•°ç»„åªå« 1 ã€‚</p></blockquote><h3 id="è¾“å…¥æ ¼å¼-1"><a href="#è¾“å…¥æ ¼å¼-1" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºæ•°ç»„é•¿åº¦ã€‚</p><p>ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•° a1, a2, Â· Â· Â· , anï¼Œç›¸é‚»ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚</p></blockquote><h3 id="è¾“å‡ºæ ¼å¼-1"><a href="#è¾“å‡ºæ ¼å¼-1" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><blockquote><p>è¾“å‡ºä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘æ“ä½œæ¬¡æ•°ã€‚å¦‚æœæ— è®ºæ€ä¹ˆæ“ä½œéƒ½æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œè¾“å‡º âˆ’1ã€‚</p></blockquote><h2 id="æµ‹è¯•æ ·ä¾‹-1"><a href="#æµ‹è¯•æ ·ä¾‹-1" class="headerlink" title="æµ‹è¯•æ ·ä¾‹"></a>æµ‹è¯•æ ·ä¾‹</h2><table><thead><tr><th>æ ·ä¾‹è¾“å…¥</th><th>æ ·ä¾‹è¾“å‡º</th></tr></thead><tbody><tr><td>3<br>4 6 9</td><td>4</td></tr></tbody></table><h2 id="è§„æ¨¡ä¸çº¦å®š-1"><a href="#è§„æ¨¡ä¸çº¦å®š-1" class="headerlink" title="è§„æ¨¡ä¸çº¦å®š"></a>è§„æ¨¡ä¸çº¦å®š</h2><blockquote><p>å¯¹äº 30% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$n â‰¤ 500 ï¼Œa_i â‰¤ 1000$ï¼›<br>å¯¹äº 50% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$n â‰¤ 5000 ï¼Œa_i â‰¤ 10^6$ï¼›<br>å¯¹äºæ‰€æœ‰è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 100000 ï¼Œ1 â‰¤ a_i â‰¤ 10^9$ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-3"><a href="#è€ƒåœºæ€è·¯-3" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>å¯ä»¥å‘ç°ï¼Œå¦‚æœæ•°åˆ—ä¸­æœ‰ä¸€ä¸ªæ•°ä¸º1ï¼Œé‚£ä¹ˆé—®é¢˜å°±å¾ˆå¥½è§£å†³äº†ï¼šç­”æ¡ˆå³ä¸ºé1çš„ä¸ªæ•°ã€‚</p><p>å› æ­¤æœ¬é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•æœ€å¿«çš„å¼„å‡ºä¸€ä¸ª1ã€‚</p><p>ç”±äºé¢˜ç›®åªå…è®¸ç›¸é‚»çš„ä¸¤ä¸ªæ•°å–gcdï¼Œæ‰€ä»¥å¦‚æœæ‰¾åˆ°è¿ç»­kä¸ªæ•°gcdä¸º1çš„è¯ï¼Œå°±å¯ä»¥ç”¨k-1æ¬¡æ“ä½œæŠŠå…¶ä¸­ä¸€ä¸ªæ•°æ¢ä¸º1ï¼Œå› æ­¤ç­”æ¡ˆä¸ºï¼šn+k-2ã€‚ï¼ˆå½“ç„¶ï¼Œå¦‚æœè¿™nä¸ªæ•°çš„gcdä¸ºé1ï¼Œå°±ç›´æ¥è¾“å‡º-1å³å¯ï¼‰</p><p>äºæ˜¯é—®é¢˜åŒ–ä¸ºå¦‚ä½•æ‰¾åˆ°è¿™ä¸ªæœ€å°çš„kã€‚</p><p>ç¨å¾®æš´åŠ›çš„åšæ³•æ˜¯ï¼Œé¦–å…ˆæ±‚ä¸¤ä¸ªä¸¤ä¸ªçš„gcdï¼Œç„¶åæ±‚ä¸‰ä¸ªä¸‰ä¸ªçš„gcdï¼ˆå¯ä»¥å‘ç°ï¼Œä¸‰ä¸ªæ•°çš„gcdå°±æ˜¯ç›¸é‚»ä¸¤ä¸ªgcdçš„gcdï¼‰ï¼Œä¾æ¬¡ä¸‹å»ï¼Œæ¯æ¬¡gcdçš„æ•°ç›®å‡å°1ï¼Œäºæ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯$O(\sum_{i=1}^n i)$å³$O(n^2)$ï¼ˆç”±äº$a_i$å¹¶ä¸å¤§ï¼Œæ‰€ä»¥gcdçš„å¤æ‚åº¦ï¼ˆä¸è¶…è¿‡$O(5 \lg n)$ï¼Œå¤§çº¦å°±æ˜¯10å€å·¦å³ï¼‰å°±å¿½ç•¥äº†ï¼‰å®ç°å¤§è‡´å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">focus_solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        n<span class="token operator">--</span><span class="token punctuation">;</span> ans<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> num<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡³äº100%çš„æ•°æ®ï¼Œæˆ‘ä½¿ç”¨äº†å€å¢+äºŒåˆ†ï¼Œå¤æ‚åº¦å¤§æ¦‚æ˜¯$O(40nlogn)$ï¼ˆå€æ•°æ˜¯gcdçš„å¤æ‚åº¦ï¼‰ï¼Œå¤æ‚åº¦ä¸Šè‚¯å®šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¤§è‡´çš„æƒ³æ³•å°±æ˜¯å…ˆé¢„å¤„ç†å‡ºä»æ•°é‡ä»»æ„ä¸€ä¸ªæ•°èµ·ï¼Œ2çš„æ•´æ¬¡å¹‚ä¸ªæ•°çš„gcdï¼Œè¿™é‡Œå¤æ‚åº¦å°±æ˜¯$O(20nlogn)$ã€‚ç„¶åå¯¹ä¸Šé¢è¯´çš„kè¿›è¡ŒäºŒåˆ†ï¼ˆkæœ€å¤§å–nï¼‰ï¼Œæ¯æ¬¡checkéå†èµ·ç‚¹ï¼Œç„¶åç”¨é¢„å¤„ç†çš„æ•°æ®è®¡ç®—å‡ºkä¸ªæ•°çš„gcdï¼Œä¹Ÿæ˜¯$O(20nlogn)$ã€‚ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">int</span> pow2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">1024</span><span class="token punctuation">,</span><span class="token number">2048</span><span class="token punctuation">,</span><span class="token number">4096</span><span class="token punctuation">,</span><span class="token number">8192</span><span class="token punctuation">,</span><span class="token number">16384</span><span class="token punctuation">,</span><span class="token number">32768</span><span class="token punctuation">,</span><span class="token number">65536</span><span class="token punctuation">,</span><span class="token number">131072</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> logval <span class="token operator">=</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span>pow2<span class="token punctuation">,</span> pow2 <span class="token operator">+</span> <span class="token number">18</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">-</span> pow2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// logval = log2(x)å‘ä¸‹å–æ•´-1</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> l <span class="token operator">=</span> i<span class="token punctuation">,</span> r <span class="token operator">=</span> i <span class="token operator">+</span> x<span class="token punctuation">;</span>        <span class="token keyword">int</span> _g <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>_gcd_2<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>logval<span class="token punctuation">]</span><span class="token punctuation">,</span> _gcd_2<span class="token punctuation">[</span>r<span class="token operator">-</span>pow2<span class="token punctuation">[</span>logval<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>logval<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// _gcd_2å°±æ˜¯é¢„å¤„ç†æ•°ç»„</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>_g <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> max_log <span class="token operator">=</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span>pow2<span class="token punctuation">,</span> pow2 <span class="token operator">+</span> <span class="token number">18</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> pow2<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> p <span class="token operator">&lt;</span> max_log<span class="token punctuation">;</span> p<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> _gcd_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">+</span>pow2<span class="token punctuation">[</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span> _gcd_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> _gcd_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> _gcd_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>_gcd_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _gcd_2<span class="token punctuation">[</span>i<span class="token operator">+</span>pow2<span class="token punctuation">[</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token keyword">int</span> L <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> R <span class="token operator">=</span> n<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>L <span class="token operator">!=</span> R<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> L <span class="token operator">+</span> R <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">)</span> R <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token keyword">else</span> L <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> n <span class="token operator">+</span> L <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="E-é¢˜ï¼šowo"><a href="#E-é¢˜ï¼šowo" class="headerlink" title="E é¢˜ï¼šowo"></a>E é¢˜ï¼šowo</h1><h2 id="é—®é¢˜æè¿°-4"><a href="#é—®é¢˜æè¿°-4" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>å°è“å¾ˆå–œæ¬¢ owo ï¼Œä»–ç°åœ¨æœ‰ä¸€äº›å­—ç¬¦ä¸²ï¼Œä»–æƒ³å°†è¿™äº›å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ï¼Œä½¿å¾—æœ€ç»ˆå¾—åˆ°çš„å­—ç¬¦ä¸²ä¸­å‡ºç°å°½å¯èƒ½å¤šçš„ owo ã€‚</p><p>åœ¨è®¡ç®—æ•°é‡æ—¶ï¼Œå…è®¸å­—ç¬¦é‡å ï¼Œå³ owowo è®¡ç®—ä¸º 2 ä¸ªï¼Œowowowo è®¡ç®—ä¸º3 ä¸ªã€‚</p><p>è¯·ç®—å‡ºæœ€ä¼˜æƒ…å†µä¸‹å¾—åˆ°çš„å­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ª owoã€‚</p></blockquote><h3 id="è¾“å…¥æ ¼å¼-2"><a href="#è¾“å…¥æ ¼å¼-2" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºå°è“æ‹¥æœ‰çš„å­—ç¬¦ä¸²çš„æ•°é‡ã€‚<br>æ¥ä¸‹æ¥ n è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² si ã€‚</p></blockquote><h3 id="è¾“å‡ºæ ¼å¼-2"><a href="#è¾“å‡ºæ ¼å¼-2" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><blockquote><p>è¾“å‡º n è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå‰ i ä¸ªå­—ç¬¦ä¸²åœ¨æœ€ä¼˜æ‹¼æ¥æ–¹æ¡ˆä¸­å¯ä»¥å¾—åˆ°çš„ owo çš„æ•°é‡ã€‚</p></blockquote><h2 id="æµ‹è¯•æ ·ä¾‹-2"><a href="#æµ‹è¯•æ ·ä¾‹-2" class="headerlink" title="æµ‹è¯•æ ·ä¾‹"></a>æµ‹è¯•æ ·ä¾‹</h2><table><thead><tr><th>æ ·ä¾‹è¾“å…¥</th><th>æ ·ä¾‹è¾“å‡º</th></tr></thead><tbody><tr><td>3<br>owo<br>w<br>ow</td><td>1<br>1<br>2</td></tr></tbody></table><h2 id="è§„æ¨¡ä¸çº¦å®š-2"><a href="#è§„æ¨¡ä¸çº¦å®š-2" class="headerlink" title="è§„æ¨¡ä¸çº¦å®š"></a>è§„æ¨¡ä¸çº¦å®š</h2><blockquote><p>å¯¹äº 10% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$n â‰¤ 10$ï¼›<br>å¯¹äº 40% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$n â‰¤ 300$ï¼›<br>å¯¹äº 60% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$n â‰¤ 5000$ï¼›<br>å¯¹äºæ‰€æœ‰è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 10^6 ï¼Œ1 â‰¤ |s_i| ï¼Œ\sum|s_i| â‰¤ 10^6$ï¼Œå…¶ä¸­ $|s_i|$è¡¨ç¤ºå­—ç¬¦ä¸²$s_i$çš„é•¿åº¦ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-4"><a href="#è€ƒåœºæ€è·¯-4" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>é¦–å…ˆè‚¯å®šè¦èƒ½è®¡ç®—å‡ºæ¯ä¸ªå­—ç¬¦ä¸²å†…éƒ¨çš„owoçš„ä¸ªæ•°ï¼Œå½“ç„¶è¿™ä¸ªæ˜¯æ¯”è¾ƒå¥½è®¡ç®—çš„ï¼Œç”¨kmpæˆ–è€…ç›´æ¥ç”¨ä¸¤ä¸ªflagå°±èƒ½æå®šã€‚</p><p>å…¶å®æ˜¯æœ€é‡è¦çš„ï¼Œè¦è€ƒè™‘æ‹¼æ¥ï¼Œä¸è¿‡å¥½åœ¨è¿™ä¸ªowoå¾ˆçŸ­ï¼Œå¯ç”¨çš„æ‹¼æ¥æ–¹å¼å¹¶ä¸å¤šï¼Œå¤§è‡´åº”è¯¥åªæœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p><ul><li>ä»¥owç»“å°¾+ä»¥oå¼€å¤´</li><li>ä»¥oç»“å°¾+ä»¥woå¼€å¤´</li><li>ä»¥oç»“å°¾+å•ç‹¬ä¸€ä¸ªå­—æ¯w+ä»¥oå¼€å¤´</li></ul><p>å› æ­¤æˆ‘ä»¬å°±ç»Ÿè®¡ä¸Šé¢è¿™äº›å¯ä»¥æ‹¼æ¥çš„å­—ç¬¦ä¸²çš„æ•°é‡å°±å¯ä»¥äº†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²æ—¢ä»¥owç»“å°¾åˆä»¥oå¼€å¤´ï¼Œè™½ç„¶éƒ½è¦è®¡æ•°ï¼Œä½†æ˜¯ä¸èƒ½è‡ªå·±å’Œè‡ªå·±æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œä¸ä»…å¦‚æ­¤ï¼Œå­—ç¬¦ä¸²ä¹Ÿä¸èƒ½æ‹¼æ¥æˆç¯ã€‚ä½†æ˜¯è¿™ä¸ªæˆ‘åœ¨è€ƒè¯•çš„æ—¶å€™æƒ³çš„ä¸å¤šï¼Œå°±æ²¡æœ‰è€ƒè™‘å®Œå…¨ï¼Œå¤§æ¦‚æ˜¯å¯„äº†ï¼Œå› æ­¤å°±ä¸æ”¾ä»£ç äº†ï¼Œå¦‚ä½•å®ç°å°±ç•™ç»™è¯»è€…æ€è€ƒå§ã€‚</p><h1 id="F-é¢˜ï¼šç¯å¢ƒæ²»ç†"><a href="#F-é¢˜ï¼šç¯å¢ƒæ²»ç†" class="headerlink" title="F é¢˜ï¼šç¯å¢ƒæ²»ç†"></a>F é¢˜ï¼šç¯å¢ƒæ²»ç†</h1><h2 id="é—®é¢˜æè¿°-5"><a href="#é—®é¢˜æè¿°-5" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>LQ å›½æ‹¥æœ‰ n ä¸ªåŸå¸‚ï¼Œä» 0 åˆ° n âˆ’ 1 ç¼–å·ï¼Œè¿™ n ä¸ªåŸå¸‚ä¸¤ä¸¤ä¹‹é—´éƒ½æœ‰ä¸”ä»…æœ‰ä¸€æ¡åŒå‘é“è·¯è¿æ¥ï¼Œè¿™æ„å‘³ç€ä»»æ„ä¸¤ä¸ªåŸå¸‚ä¹‹é—´éƒ½æ˜¯å¯è¾¾çš„ã€‚æ¯æ¡é“è·¯éƒ½æœ‰ä¸€ä¸ªå±æ€§ D ï¼Œè¡¨ç¤ºè¿™æ¡é“è·¯çš„ç°å°˜åº¦ã€‚å½“ä»ä¸€ä¸ªåŸå¸‚ A å‰å¾€å¦ä¸€ä¸ªåŸå¸‚ B æ—¶ï¼Œå¯èƒ½å­˜åœ¨å¤šæ¡è·¯çº¿ï¼Œæ¯æ¡è·¯çº¿çš„ç°å°˜åº¦å®šä¹‰ä¸ºè¿™æ¡è·¯çº¿æ‰€ç»è¿‡çš„æ‰€æœ‰é“è·¯çš„ç°å°˜åº¦ä¹‹å’Œï¼ŒLQ å›½çš„äººéƒ½å¾ˆè®¨åŒç°å°˜ï¼Œæ‰€ä»¥ä»–ä»¬æ€»ä¼šä¼˜å…ˆé€‰æ‹©ç°å°˜åº¦æœ€å°çš„è·¯çº¿ã€‚</p><p>LQ å›½å¾ˆçœ‹é‡å±…æ°‘çš„å‡ºè¡Œç¯å¢ƒï¼Œä»–ä»¬ç”¨ä¸€ä¸ªæŒ‡æ ‡ P æ¥è¡¡é‡ LQ å›½çš„å‡ºè¡Œç¯å¢ƒï¼ŒP å®šä¹‰ä¸ºï¼š<br>$$<br>P = \sum_{i=0}^{n-1}\sum_{j=0}^{n-1}d(i,j)<br>$$<br>å…¶ä¸­ d(i, j) è¡¨ç¤ºåŸå¸‚ i åˆ°åŸå¸‚ j ä¹‹é—´ç°å°˜åº¦æœ€å°çš„è·¯çº¿å¯¹åº”çš„ç°å°˜åº¦çš„å€¼ã€‚</p><p>ä¸ºäº†æ”¹å–„å‡ºè¡Œç¯å¢ƒï¼Œæ¯ä¸ªåŸå¸‚éƒ½è¦æœ‰æ‰€ä½œä¸ºï¼Œå½“æŸä¸ªåŸå¸‚è¿›è¡Œé“è·¯æ”¹å–„æ—¶ï¼Œä¼šå°†ä¸è¿™ä¸ªåŸå¸‚ç›´æ¥ç›¸è¿çš„æ‰€æœ‰é“è·¯çš„ç°å°˜åº¦éƒ½å‡å°‘ 1ï¼Œä½†æ¯æ¡é“è·¯éƒ½æœ‰ä¸€ä¸ªç°å°˜åº¦çš„ä¸‹é™å€¼ Lï¼Œå½“ç°å°˜åº¦è¾¾åˆ°é“è·¯çš„ä¸‹é™å€¼æ—¶ï¼Œæ— è®ºå†æ€ä¹ˆæ”¹å–„ï¼Œé“è·¯çš„ç°å°˜åº¦ä¹Ÿä¸ä¼šå†å‡å°äº†ã€‚</p><p>å…·ä½“çš„è®¡åˆ’æ˜¯è¿™æ ·çš„ï¼š<br>ç¬¬ 1 å¤©ï¼Œ0 å·åŸå¸‚å¯¹ä¸å…¶ç›´æ¥ç›¸è¿çš„é“è·¯ç¯å¢ƒè¿›è¡Œæ”¹å–„ï¼›<br>ç¬¬ 2 å¤©ï¼Œ1 å·åŸå¸‚å¯¹ä¸å…¶ç›´æ¥ç›¸è¿çš„é“è·¯ç¯å¢ƒè¿›è¡Œæ”¹å–„ï¼›<br>â€¦<br>ç¬¬ n å¤©ï¼Œn âˆ’ 1 å·åŸå¸‚å¯¹ä¸å…¶ç›´æ¥ç›¸è¿çš„é“è·¯ç¯å¢ƒè¿›è¡Œæ”¹å–„ï¼›<br>ç¬¬ n + 1 å¤©ï¼Œ0 å·åŸå¸‚å¯¹ä¸å…¶ç›´æ¥ç›¸è¿çš„é“è·¯ç¯å¢ƒè¿›è¡Œæ”¹å–„ï¼›<br>ç¬¬ n + 2 å¤©ï¼Œ1 å·åŸå¸‚å¯¹ä¸å…¶ç›´æ¥ç›¸è¿çš„é“è·¯ç¯å¢ƒè¿›è¡Œæ”¹å–„ï¼›<br>â€¦</p><p>LQ å›½æƒ³è¦ä½¿å¾— P æŒ‡æ ‡æ»¡è¶³ P â‰¤ Qã€‚è¯·é—®æœ€å°‘è¦ç»è¿‡å¤šå°‘å¤©ä¹‹åï¼ŒP æŒ‡æ ‡å¯ä»¥æ»¡è¶³ P â‰¤ Qã€‚å¦‚æœåœ¨åˆå§‹æ—¶å°±å·²ç»æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¾“å‡º 0 ï¼›å¦‚æœæ°¸è¿œä¸å¯èƒ½æ»¡è¶³ï¼Œåˆ™è¾“å‡º âˆ’1ã€‚</p></blockquote><h3 id="è¾“å…¥æ ¼å¼-3"><a href="#è¾“å…¥æ ¼å¼-3" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°$n, Q$ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œåˆ†åˆ«è¡¨ç¤ºåŸå¸‚ä¸ªæ•°å’ŒæœŸæœ›è¾¾åˆ°çš„$P$æŒ‡æ ‡ã€‚</p><p>æ¥ä¸‹æ¥$n$è¡Œï¼Œæ¯è¡ŒåŒ…å«$n$ä¸ªæ•´æ•°ï¼Œç›¸é‚»ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œå…¶ä¸­ç¬¬$i$è¡Œç¬¬$j$åˆ—çš„å€¼$D_{ij}$ $(D_{ij} = D_{ji}, D_{ii} = 0)$è¡¨ç¤ºåŸå¸‚$i$ä¸åŸå¸‚$j$ä¹‹é—´ç›´æ¥ç›¸è¿çš„é‚£æ¡é“è·¯çš„ç°å°˜åº¦ã€‚</p><p>æ¥ä¸‹æ¥$n$è¡Œï¼Œæ¯è¡ŒåŒ…å«$n$ä¸ªæ•´æ•°ï¼Œç›¸é‚»ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ï¼Œå…¶ä¸­ç¬¬$i$è¡Œç¬¬$j$åˆ—çš„å€¼$L_{ij}$ $(L_{ij} = L_{ji}, L_{ii} = 0)$è¡¨ç¤ºåŸå¸‚$i$ä¸åŸå¸‚$j$ä¹‹é—´ç›´æ¥ç›¸è¿çš„é‚£æ¡é“è·¯çš„ç°å°˜åº¦çš„ä¸‹é™å€¼ã€‚</p></blockquote><h3 id="è¾“å‡ºæ ¼å¼-3"><a href="#è¾“å‡ºæ ¼å¼-3" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><blockquote><p>è¾“å‡ºä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚</p></blockquote><h2 id="æµ‹è¯•æ ·ä¾‹-3"><a href="#æµ‹è¯•æ ·ä¾‹-3" class="headerlink" title="æµ‹è¯•æ ·ä¾‹"></a>æµ‹è¯•æ ·ä¾‹</h2><table><thead><tr><th>æ ·ä¾‹è¾“å…¥</th><th>æ ·ä¾‹è¾“å‡º</th></tr></thead><tbody><tr><td>3 10<br>0 2 4<br>2 0 1<br>4 1 0<br>0 2 2<br>2 0 0<br>2 0 0</td><td>2</td></tr></tbody></table><h3 id="æ ·ä¾‹è¯´æ˜-1"><a href="#æ ·ä¾‹è¯´æ˜-1" class="headerlink" title="æ ·ä¾‹è¯´æ˜"></a>æ ·ä¾‹è¯´æ˜</h3><blockquote><p>åˆå§‹æ—¶çš„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œæ¯æ¡è¾¹ä¸Šçš„æ•°å­—è¡¨ç¤ºè¿™æ¡é“è·¯çš„ç°å°˜åº¦ï¼š<br><img src="https://s2.loli.net/2022/06/19/wDqNgLBJd9fFKmH.png"><br>æ­¤æ—¶æ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„ç°å°˜åº¦æœ€å°çš„è·¯çº¿å¯¹åº”çš„ç°å°˜åº¦ä¸ºï¼š<br>$$<br>d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 3, \<br>d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 1, \<br>d(2, 0) = 3, d(2, 1) = 1, d(2, 2) = 0.<br>$$<br>åˆå§‹æ—¶çš„ P æŒ‡æ ‡ä¸º (2 + 3 + 1) Ã— 2 = 12ï¼Œä¸æ»¡è¶³ P â‰¤ Q = 10ï¼›<br>ç¬¬ä¸€å¤©ï¼Œ0 å·åŸå¸‚è¿›è¡Œé“è·¯æ”¹å–„ï¼Œæ”¹å–„åçš„å›¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2022/06/19/ars39hq7ef68Kg1.png"><br>æ³¨æ„åˆ°è¾¹ (0, 2) çš„å€¼å‡å°äº† 1 ï¼Œä½† (0, 1) å¹¶æ²¡æœ‰å‡å°ï¼Œå› ä¸º L0,1 = 2 ï¼Œæ‰€ä»¥<br>(0, 1) çš„å€¼ä¸å¯ä»¥å†å‡å°äº†ã€‚æ­¤æ—¶æ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„ç°å°˜åº¦æœ€å°çš„è·¯çº¿å¯¹åº”çš„ç°å°˜<br>åº¦ä¸ºï¼š<br>$$<br>d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 3, \<br>d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 1, \<br>d(2, 0) = 3, d(2, 1) = 1, d(2, 2) = 0.<br>$$<br>æ­¤æ—¶ P ä»ä¸º 12ã€‚<br>ç¬¬äºŒå¤©ï¼Œ1 å·åŸå¸‚è¿›è¡Œé“è·¯æ”¹å–„ï¼Œæ”¹å–„åçš„å›¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2022/06/19/ftncCIoLR38XSWN.png"><br>æ­¤æ—¶æ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„ç°å°˜åº¦æœ€å°çš„è·¯çº¿å¯¹åº”çš„ç°å°˜åº¦ä¸ºï¼š<br>$$<br>d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 2, \<br>d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 0, \<br>d(2, 0) = 2, d(2, 1) = 0, d(2, 2) = 0.<br>$$<br>æ­¤æ—¶çš„ P æŒ‡æ ‡ä¸º (2 + 2) Ã— 2 = 8 &lt; Q ï¼Œæ­¤æ—¶å·²ç»æ»¡è¶³æ¡ä»¶ã€‚<br>æ‰€ä»¥ç­”æ¡ˆæ˜¯ 2ã€‚</p></blockquote><h2 id="è§„æ¨¡ä¸çº¦å®š-3"><a href="#è§„æ¨¡ä¸çº¦å®š-3" class="headerlink" title="è§„æ¨¡ä¸çº¦å®š"></a>è§„æ¨¡ä¸çº¦å®š</h2><blockquote><p>å¯¹äº 30% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 10 ï¼Œ0 â‰¤ L_{ij} â‰¤ D_{ij} â‰¤ 10$ï¼›<br>å¯¹äº 60% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 50 ï¼Œ0 â‰¤ L_{ij} â‰¤ D_{ij} â‰¤ 100000$ï¼›<br>å¯¹äºæ‰€æœ‰è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 100 ï¼Œ0 â‰¤ L_{ij} â‰¤ D_{ij} â‰¤ 100000 ï¼Œ0 â‰¤ Q â‰¤ 2^{31} âˆ’ 1$ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-5"><a href="#è€ƒåœºæ€è·¯-5" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>ä¸å¾—ä¸è¯´è¿™ä¸ªé¢˜é•¿åˆ°ç¦»è°±ï¼ˆå…¶å®æ˜¯æ ·ä¾‹è§£é‡Šé•¿ï¼‰ï¼Œæ‰€ä»¥æˆ‘æœ€åçœ‹çš„è¿™ä¸ªé¢˜ã€‚è¿™ä¸ªé¢˜æš´åŠ›çš„è¯æ˜¾ç„¶å°±æ˜¯æ¯å¤©éƒ½ç”¨Floydç®—æ³•æ±‚ä¸€éæœ€çŸ­è·¯ï¼Œç„¶åæ±‚ä¸€éPå°±å¯ä»¥äº†ï¼Œå¤æ‚åº¦ä¸Šæ˜¯$O(day \cdot n^3)$ï¼Œå…¶ä¸­Dayæ˜¯éœ€è¦ç»å†çš„å¤©æ•°ï¼Œè‡³äºè¾“å‡º-1çš„æƒ…å†µï¼Œå®Œå…¨å¯ä»¥ç”¨$L_{ij}$ä½œä¸ºè¾¹æƒè·‘ä¸€æ¬¡Floydå°±çŸ¥é“äº†ã€‚é—®é¢˜å°±æ˜¯ï¼Œè¿™ä¸ªå¤æ‚åº¦æ˜¯æ— æ³•æ¥å—çš„ï¼Œç”šè‡³è¿60%çš„æ•°æ®éƒ½ä¸èƒ½é€šè¿‡ï¼Œåªèƒ½æ‹¿åˆ°30%çš„åˆ†ã€‚</p><p>è¿™é‡Œå‘¢æ³¨æ„åˆ°æ•°æ®è§„æ¨¡ä¸­$n$æ˜¯æ¯”è¾ƒå°çš„ï¼Œä½†æ˜¯$D-L$å¯èƒ½æ˜¯æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è€ƒè™‘äºŒåˆ†ç­”æ¡ˆï¼Œç†æƒ³ä¸­å¤æ‚åº¦åº”è¯¥æ˜¯$O(log(\frac12n(D-L))\cdot n^3)$ï¼Œè¿™æ ·å¤æ‚åº¦çš„è¯å°±å¾ˆå¯ä»¥æ¥å—äº†ã€‚è¿™é‡ŒäºŒåˆ†çš„è¯æœ€å¤§çš„å¤©æ•°åº”è¯¥æ˜¯$\frac12nD=5e6$ã€‚checkå‡½æ•°çš„ä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼ˆå¤æ‚åº¦æ˜¯$O(n^2 + n^3)$ï¼‰ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> turn <span class="token operator">=</span> day <span class="token operator">/</span> n<span class="token punctuation">;</span> <span class="token comment">// æ¯ä¸€è½®ï¼Œæ¯æ¡é“è·¯ç°å°˜åº¦ä¸‹é™2</span>    day <span class="token operator">%=</span> n<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> D<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> turn<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>day <span class="token operator">&gt;</span> i<span class="token punctuation">)</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœè¿™ä¸€è½®åŸå¸‚iè¿˜è¿›è¡Œäº†æ¸…ç†</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>day <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœè¿™ä¸€è½®åŸå¸‚jè¿˜è¿›è¡Œäº†æ¸…ç†</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„ç°å°˜åº¦æ˜¯æœ‰ä¸‹é™çš„</span>        <span class="token punctuation">}</span>    <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> P <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            P <span class="token operator">+=</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>P <span class="token operator">&lt;=</span> Q<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="G-é¢˜ï¼šé€‰ç´ æ•°"><a href="#G-é¢˜ï¼šé€‰ç´ æ•°" class="headerlink" title="G é¢˜ï¼šé€‰ç´ æ•°"></a>G é¢˜ï¼šé€‰ç´ æ•°</h1><h2 id="é—®é¢˜æè¿°-6"><a href="#é—®é¢˜æè¿°-6" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><blockquote><p>å°è“æœ‰ä¸€ä¸ªæ•° xï¼Œæ¯æ¬¡æ“ä½œå°è“ä¼šé€‰æ‹©ä¸€ä¸ªå°äº x çš„ç´ æ•° pï¼Œç„¶ååœ¨ x æˆä¸º p çš„å€æ•°å‰ä¸æ–­å°† x åŠ  1ï¼Œ(å¦‚æœ x ä¸€å¼€å§‹å°±æ˜¯ p çš„å€æ•°åˆ™ x ä¸å˜)ã€‚</p><p>å°ä¹”çœ‹åˆ°äº†å°è“è¿›è¡Œäº† 2 æ¬¡ä¸Šè¿°æ“ä½œåå¾—åˆ°çš„ç»“æœ nï¼Œä»–æƒ³çŸ¥é“ x åœ¨ä¸€å¼€å§‹æ˜¯å¤šå°‘ã€‚å¦‚æœæœ‰å¤šç§å¯èƒ½ï¼Œä»–æƒ³çŸ¥é“ x ä¸€å¼€å§‹æœ€å°å¯ä»¥æ˜¯å¤šå°‘ï¼Œè€Œå¦‚æœä¸å­˜åœ¨ä»»ä½•è§£ï¼Œè¯´æ˜å°ä¹”çœ‹é”™äº†ï¼Œæ­¤æ—¶è¯·è¾“å‡º âˆ’1ã€‚</p></blockquote><h3 id="è¾“å…¥æ ¼å¼-4"><a href="#è¾“å…¥æ ¼å¼-4" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><blockquote><p>è¾“å…¥ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºç»è¿‡ä¸¤æ¬¡æ“ä½œå x çš„å€¼ã€‚</p></blockquote><h3 id="è¾“å‡ºæ ¼å¼-4"><a href="#è¾“å‡ºæ ¼å¼-4" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><blockquote><p>è¾“å‡ºä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°è¡¨ç¤º x çš„åˆå§‹å€¼ã€‚å¦‚æœæœ‰å¤šä¸ªè§£ï¼Œè¾“å‡ºæœ€å°çš„ã€‚å¦‚æœä¸å­˜åœ¨è§£ï¼Œè¯·è¾“å‡º âˆ’1 ã€‚</p></blockquote><h2 id="æµ‹è¯•æ ·ä¾‹-4"><a href="#æµ‹è¯•æ ·ä¾‹-4" class="headerlink" title="æµ‹è¯•æ ·ä¾‹"></a>æµ‹è¯•æ ·ä¾‹</h2><table><thead><tr><th>æ ·ä¾‹è¾“å…¥</th><th>æ ·ä¾‹è¾“å‡º</th></tr></thead><tbody><tr><td>22</td><td>8</td></tr></tbody></table><h2 id="è§„æ¨¡ä¸çº¦å®š-4"><a href="#è§„æ¨¡ä¸çº¦å®š-4" class="headerlink" title="è§„æ¨¡ä¸çº¦å®š"></a>è§„æ¨¡ä¸çº¦å®š</h2><blockquote><p>å¯¹äº 60% çš„è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 5000$ï¼›<br>å¯¹äºæ‰€æœ‰è¯„æµ‹ç”¨ä¾‹ï¼Œ$1 â‰¤ n â‰¤ 10^6$ã€‚</p></blockquote><h2 id="è€ƒåœºæ€è·¯-6"><a href="#è€ƒåœºæ€è·¯-6" class="headerlink" title="è€ƒåœºæ€è·¯"></a>è€ƒåœºæ€è·¯</h2><p>è¿™ä¸ªé¢˜çš„é•¿åº¦å°±å’Œå‰é¢é‚£ä¸ªé¢˜å½¢æˆäº†é²œæ˜çš„å¯¹æ¯”<span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ã€‚ç»è¿‡ä¸€ç•ªæ€è€ƒï¼Œå¯ä»¥å‘ç°ï¼Œå¦‚æœæ•°$x=p_1^{k_1}p_2^{k_2}\cdots p_m^{k_m}$ä¸”å…¶ä¸­$p_1 &lt; p_2 &lt; \cdots &lt; p_m$ï¼Œåˆ™$x$çš„ä¸Šä¸€ä¸ªæ•°å¯èƒ½ä¸”åªå¯èƒ½ä½äº$[x-p_m+1,x-1]$ä¸­ï¼Œä¸”å¦‚æœ$x$æ˜¯ç´ æ•°ï¼Œè¿™ä¸Šä¸€ä¸ªæ•°ä¸å­˜åœ¨ã€‚</p><p>å‘ç°è¿™ä¸€ç‚¹ä¹‹åå°±å¯ä»¥åšäº†ï¼Œåªéœ€è¦å…ˆæŠŠ$x$è´¨å› æ•°åˆ†è§£ï¼Œç„¶åæ‰¾å‡ºæœ€å¤§çš„ç´ å› å­ï¼Œå¾—åˆ°åªç»è¿‡ä¸€è½®çš„æ•°ï¼Œç„¶ååœ¨æŠŠæ‰€æœ‰å¯èƒ½çš„æ•°éƒ½å†è¿›è¡Œä¸€æ¬¡æ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„åŸå§‹æ•°äº†ã€‚å¤æ‚åº¦åº”è¯¥æ˜¯$O(\sum_{i=\sqrt n}^{n} \sqrt i)$ï¼Œä¸è¿‡ç»è¿‡è®¡ç®—å¯çŸ¥è¿™ä¸ªå¤æ‚åº¦å¤§çº¦æ˜¯$O(n^{\frac32})$ï¼Œå…¶å®æ˜¯è¿‡ä¸äº†å…¨éƒ¨æ•°æ®çš„ï¼Œä½†æ˜¯ç”±äºå¤§éƒ¨åˆ†æ•°ä¸æ˜¯è´¨æ•°ï¼Œéƒ½æ‹¥æœ‰è¾ƒå°çš„è´¨å› å­ï¼Œæ‰€ä»¥åˆ†è§£è´¨å› æ•°çš„å¤æ‚åº¦åº”å½“å°äº$O(\sqrt x)$ï¼Œæ‰€ä»¥æˆ‘å¤§èƒ†çŒœæµ‹æ˜¯å¯ä»¥è¿‡çš„ã€‚</p><p>è€ƒè¯•ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">unsigned</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> depth<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>depth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> prime_i<span class="token punctuation">;</span> <span class="token comment">// æ˜¾ç„¶æ˜¯æ²¡æœ‰å¿…è¦çš„</span>    <span class="token keyword">int</span> tmp <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">*</span> i <span class="token operator">&lt;=</span> tmp<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>tmp <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            prime_i<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>tmp <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> tmp <span class="token operator">/=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>tmp <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> tmp <span class="token operator">!=</span> x<span class="token punctuation">)</span> prime_i<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tmp==xè¯´æ˜æ˜¯xè´¨æ•°</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>prime_i<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> max_p <span class="token operator">=</span> prime_i<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">unsigned</span> anss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max_p<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        anss <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>anss<span class="token punctuation">,</span> <span class="token function">solve</span><span class="token punctuation">(</span>x <span class="token operator">-</span> i<span class="token punctuation">,</span> depth<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨unsignedå…¶å®å°±æ˜¯ä¸ºäº†å–minæ–¹ä¾¿</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> anss<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»å‡½æ•°è°ƒç”¨<code>solve(n,2)</code>ç„¶åæŠŠè¿”å›å€¼è½¬åŒ–ä¸º<code>int</code>å³å¯ã€‚</p><h1 id="æœªå®Œå¾…ç»­â€¦â€¦"><a href="#æœªå®Œå¾…ç»­â€¦â€¦" class="headerlink" title="æœªå®Œå¾…ç»­â€¦â€¦"></a>æœªå®Œå¾…ç»­â€¦â€¦</h1><p>å…¶å®å‰©ä¸‹çš„ä¸‰ä¸ªé¢˜æˆ‘éƒ½ä¸ä¼šäº†â€¦â€¦<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> ç«èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è“æ¡¥æ¯ </tag>
            
            <tag> C/C++ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Pythonã€‘ä½¿ç”¨socketåº“å®ç°server-clienté€šè®¯çš„è”æœºå¯¹æˆ˜æ¸¸æˆï¼ˆä¸€ï¼‰</title>
      <link href="posts/pythonsocket.html"/>
      <url>posts/pythonsocket.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="socketå•å¯¹å•é€šè®¯"><a href="#socketå•å¯¹å•é€šè®¯" class="headerlink" title="socketå•å¯¹å•é€šè®¯"></a>socketå•å¯¹å•é€šè®¯</h1><p>socketæ˜¯Pythonå†…å»ºåº“ä¹‹ä¸€ï¼Œç”¨é€”å°±æ˜¯ç½‘ç»œé€šè®¯ã€‚ä½œä¸ºå®éªŒï¼Œæˆ‘ä»¬è€ƒè™‘ä¸¤ä¸ªPythonç¨‹åºä¹‹é—´çš„é€šè®¯ï¼Œä¸€ä¸ªä½œä¸ºæœåŠ¡å™¨ï¼Œä¸€ä¸ªä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸²å­—ç¬¦ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åå°†åŸå­—ç¬¦ä¸²å¤§å†™åä¼ å›ï¼Œç›´åˆ°å®¢æˆ·ç«¯å‘é€ç©ºä¿¡æ¯ï¼ŒæœåŠ¡å™¨é€€å‡ºã€‚</p><p>æœåŠ¡å™¨ç«¯ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socketip_port <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span> <span class="token comment"># è¿™ä¸ªtupleçš„ç¬¬ä¸€é¡¹æ˜¯ipåœ°å€ï¼Œç¬¬äºŒé¡¹æ˜¯ç«¯å£</span>s <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment"># å®šä¹‰socketç±»å‹ï¼Œç½‘ç»œé€šä¿¡ï¼ŒTCP</span>s<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>ip_port<span class="token punctuation">)</span> <span class="token comment"># å¥—æ¥å­—ç»‘å®šipå’Œç«¯å£</span>s<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># å¼€å§‹ç›‘å¬è¿æ¥è¯·æ±‚</span>conn<span class="token punctuation">,</span> addr <span class="token operator">=</span> s<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># æ¥å—è¿æ¥è¯·æ±‚ï¼Œconnæ˜¯ä¸€ä¸ªæ–°çš„å¥—æ¥å­—ï¼Œaddræ˜¯å®¢æˆ·ç«¯åœ°å€</span>conn<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span><span class="token string">'Hello from the server!'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å‘é€æ‰“æ‹›å‘¼ä¿¡æ¯ï¼Œå¹¶ä¸”ç”¨utf-8ç¼–ç </span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        data <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment"># æ¥å—æ•°æ®å¹¶ä½¿ç”¨utf-8è§£ç </span>        <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>            <span class="token keyword">break</span> <span class="token comment"># å¦‚æœæ•°æ®ä¸ºç©ºå°±é€€å‡º</span>        conn<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span>data<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># æŠŠæ•°æ®å¤§å†™åè¿”å›</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token comment"># å¦‚æœæ•°æ®ä¼ è¾“å‡ºé”™</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>        exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># å…³é—­å¥—æ¥å­—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®¢æˆ·ç«¯ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socketip_port <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span> <span class="token comment"># æœåŠ¡å™¨ipå’Œç«¯å£</span>s <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment"># å®šä¹‰socketç±»å‹ï¼Œç½‘ç»œé€šä¿¡ï¼ŒTCP</span><span class="token keyword">try</span><span class="token punctuation">:</span>    s<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>ip_port<span class="token punctuation">)</span> <span class="token comment"># å°è¯•è¿æ¥æœåŠ¡å™¨</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token comment"># å¦‚æœè¿æ¥å¤±è´¥socket.socket.connectä¼šæŠ›å‡ºé”™è¯¯</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>data <span class="token operator">=</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment"># æ¥å—æœåŠ¡å™¨çš„é—®å€™</span><span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'&gt;&gt;&gt; '</span><span class="token punctuation">)</span> <span class="token comment"># æ­¤æ—¶ç”¨æˆ·å¯ä»¥åœ¨è¿è¡Œå®¢æˆ·ç«¯çš„æ§åˆ¶å°ä¸­è¾“å…¥å†…å®¹</span>        s<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å°†æ¶ˆæ¯å‘é€</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span>            <span class="token keyword">break</span> <span class="token comment"># å¦‚æœæ•°æ®ä¸ºç©ºå°±é€€å‡º</span>        data <span class="token operator">=</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment"># æ¥å—æœåŠ¡å™¨çš„ç»“æœ</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token comment"># å¦‚æœæ•°æ®ä¼ è¾“å‡ºé”™</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>        exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># å…³é—­å¥—æ¥å­—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://s2.loli.net/2022/06/16/8S4lKr17fpYLNyw.png" alt="è¿è¡Œç»“æœ"></p><h1 id="socketserverå¤šå¯¹ä¸€é€šè®¯"><a href="#socketserverå¤šå¯¹ä¸€é€šè®¯" class="headerlink" title="socketserverå¤šå¯¹ä¸€é€šè®¯"></a>socketserverå¤šå¯¹ä¸€é€šè®¯</h1><p>ç”±äºæˆ‘çš„ç›®çš„æ˜¯æ‰“ç®—å†™ä¸€ä¸ªè”æœºå¯¹æˆ˜æ¸¸æˆï¼Œé‚£ä¹ˆä¸€ä¸ªæœåŠ¡å™¨éœ€è¦åŒæ—¶å’Œå¤šä¸ªï¼ˆè‡³å°‘æ˜¯ä¸¤ä¸ªï¼‰å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ã€‚ä¸€ä¸ªå¾ˆå®¹æ˜“æƒ³åˆ°çš„åšæ³•å°±æ˜¯æœåŠ¡å™¨å¤šçº¿ç¨‹ã€‚å¥½åœ¨Pythonå·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†å¤šçº¿ç¨‹å’Œsocketåº“â€”â€”socketserveråº“ã€‚</p><p>socketserveråº“çš„ç”¨æ³•å’Œsocketå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œè€Œä¸”ç”±äºåªæœ‰æœåŠ¡å™¨ç«¯éœ€è¦å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥åªéœ€è¦æ›´æ”¹server.pyå³å¯ã€‚</p><p>ä¸‹é¢æ˜¯server.pyçš„ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socketserverip_port <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">10888</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">MyServer</span><span class="token punctuation">(</span>socketserver<span class="token punctuation">.</span>BaseRequestHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># é‡å†™RequestHandlerä¸­çš„handleæ–¹æ³•ç”¨æ¥å¤„ç†è¯·æ±‚</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"conn is :"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>request<span class="token punctuation">)</span>  <span class="token comment"># conn</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"addr is :"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>client_address<span class="token punctuation">)</span>  <span class="token comment"># addr</span>        self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span><span class="token string">'Hello from the server!'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span> <span class="token comment"># å¤„ç†æ–¹é¢çš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                data <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>                    <span class="token keyword">break</span>                self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>sendall<span class="token punctuation">(</span>data<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>                <span class="token keyword">break</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"disconnected with"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>client_address<span class="token punctuation">)</span>        <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> socketserver<span class="token punctuation">.</span>ThreadingTCPServer<span class="token punctuation">(</span>ip_port<span class="token punctuation">,</span> MyServer<span class="token punctuation">)</span> <span class="token comment"># å»ºç«‹TCPåè®®å¥—æ¥å­—</span>        <span class="token comment"># ä½¿ç”¨s.serve_forever()æ¥å—æ— ç©·æ¬¡è¿æ¥ï¼ˆéœ€è¦æŒ‰ä¸‹Ctrl+Cä¸­æ–­ï¼‰</span>    <span class="token comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€æ¬¡s.handle_request()æ¥å—ä¸€æ¬¡è¿æ¥</span>    s<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://s2.loli.net/2022/06/16/qGRdK1ui4zof2W5.png" alt="ServeræœåŠ¡å™¨ç»“æœ"></p><p><img src="https://s2.loli.net/2022/06/16/Bk8IOVmco4bUhjX.png" alt="Clientå®¢æˆ·ç«¯ç»“æœ"></p><h1 id="æœåŠ¡å™¨å†…éƒ¨æ•°æ®ä¼ è¾“"><a href="#æœåŠ¡å™¨å†…éƒ¨æ•°æ®ä¼ è¾“" class="headerlink" title="æœåŠ¡å™¨å†…éƒ¨æ•°æ®ä¼ è¾“"></a>æœåŠ¡å™¨å†…éƒ¨æ•°æ®ä¼ è¾“</h1><p>ç°åœ¨æˆ‘ä»¬å·²ç»è§£å†³äº†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„æ•°æ®ä¼ è¾“é—®é¢˜äº†ï¼Œä½†æ˜¯è¿™åˆå¼•å…¥äº†æ–°çš„é—®é¢˜ï¼šæœåŠ¡å™¨ç”¨å¤šçº¿ç¨‹å’Œå®¢æˆ·ç«¯äº¤æµï¼Œä½†æ˜¯socketserverå°è£…çš„å¤ªå¥½äº†ï¼Œæƒ³è¦ç›´æ¥ä»å¤–éƒ¨æ“ä½œå„ä¸ªçº¿ç¨‹æ˜¾ç„¶ä¸æ˜¾ç¤ºï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡ŒæœåŠ¡å™¨å„ä¸ªçº¿ç¨‹ä¹‹é—´çš„äº¤æµå‘¢ï¼Ÿ</p><p>è¯·å¬ä¸‹å›åˆ†è§£â€¦â€¦</p><p><span class="github-emoji"><span>ğŸ˜€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> server-client </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ å¥½åšå®¢ï¼Hello Blog!</title>
      <link href="posts/helloblog.html"/>
      <url>posts/helloblog.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="01-ä»é›¶å¼€å§‹æ­å»ºå±äºè‡ªå·±çš„åšå®¢"><a href="#01-ä»é›¶å¼€å§‹æ­å»ºå±äºè‡ªå·±çš„åšå®¢" class="headerlink" title="01 ä»é›¶å¼€å§‹æ­å»ºå±äºè‡ªå·±çš„åšå®¢"></a>01 ä»é›¶å¼€å§‹æ­å»ºå±äºè‡ªå·±çš„åšå®¢</h1><p>å…·ä½“æ“ä½œè§<a href="https://www.cnblogs.com/huanhao/p/prettykde.html">æ­¤åšå®¢</a></p><p>ä¸è¿‡ç”±äºæˆ‘ä¹‹å‰å¼„è¿‡ä¸€åŠï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„æ“ä½œå°±çœäº†ï¼Œå› æ­¤è¿™é‡Œå°±ä¸è®°å½•äº†ã€‚</p><h1 id="02-é€‰æ‹©åˆé€‚çš„å¥½çœ‹çš„Theme"><a href="#02-é€‰æ‹©åˆé€‚çš„å¥½çœ‹çš„Theme" class="headerlink" title="02 é€‰æ‹©åˆé€‚çš„å¥½çœ‹çš„Theme"></a>02 é€‰æ‹©åˆé€‚çš„å¥½çœ‹çš„Theme</h1><p>ç»è¿‡è®¸å¤šæ¬¡è¯•é”™ï¼Œæœ€ç»ˆçœ‹åˆ°äº†Luckeyå¤§ä½¬çš„<a href="https://www.bilibili.com/video/BV1aV411k7Yq?share_source=copy_web">è§†é¢‘</a>ï¼Œååˆ†ç¾¡æ…•ï¼Œäºæ˜¯cloneäº†ä»–çš„<a href="http://www.luckyzmj.cn/">åšå®¢</a>.</p><h1 id="03-åšå®¢ä¸ªæ€§åŒ–"><a href="#03-åšå®¢ä¸ªæ€§åŒ–" class="headerlink" title="03 åšå®¢ä¸ªæ€§åŒ–"></a>03 åšå®¢ä¸ªæ€§åŒ–</h1><p>å¦‚æœè¯´å‰é¢çš„å†…å®¹éƒ½æ˜¯è·Ÿç€æ•™ç¨‹åŠ¨åŠ¨æ‰‹æŒ‡å°±å¯ä»¥å®Œæˆï¼Œé‚£ä¹ˆè¿™ä¸€æ­¥å°†ä¼šæ˜¯æœ€å¤§çš„å™©æ¢¦ã€‚</p><p>å…¶ä¸­æœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼šæˆ‘å‹æ ¹æ²¡æœ‰å­¦è¿‡å‰ç«¯ï¼Œå¤§ä½¬çš„åšå®¢çš„å¤æ‚ç¨‹åº¦å¯¹äºæˆ‘æ¥è¯´ç®€ç›´éš¾ä»¥æƒ³è±¡ã€‚å› æ­¤è¿™é‡Œè¦ç‰¹åˆ«æ„Ÿè°¢<a href="https://github.com/LuckyZmj/LuckyBlog">Luckeyå¤§ä½¬çš„æ•™ç¨‹</a>ä»¥åŠ<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">Materyä¸»é¢˜çš„ä½¿ç”¨æ‰‹å†Œ</a>ï¼Œä¸­æ–‡æ–‡æ¡£çœŸçš„å¯¹æˆ‘è¿™ç§è‹±è¯­ç™½ç—´éå¸¸å‹å¥½ï¼</p><p>ç„¶åæˆ‘å°±å¼€å§‹çœ‹ç€å„å¼å„æ ·çš„æ–‡æ¡£ä¸€é€šä¹±æ”¹ï¼Œä¸ºäº†é™ä½æ”¹åŠ¨éš¾åº¦ï¼Œæˆ‘å°±æŠŠç”¨ä¸åˆ°çš„åŠŸèƒ½çš„å…¥å£åˆ æ‰äº†ï¼Œä½†æ˜¯å¦‚æœä½ æ‰‹åŠ¨è¾“å…¥äº‰å–çš„urlçš„è¯å…¶å®ä¾ç„¶å¯ä»¥çœ‹åˆ°Luckeyå¤§ä½¬çš„å¾ˆå¤šè®©æˆ‘å¤§ä¸ºéœ‡æ’¼çš„åŠŸèƒ½ï¼Œæƒ³çœ‹çš„æœ‹å‹å¯ä»¥å»ä»–çš„<a href="http://www.luckyzmj.cn/">åšå®¢</a>æ¬£èµæ¬£èµã€‚</p><p>æˆ‘åšçš„æ¯”è¾ƒåˆ°å¤§çš„æ”¹åŠ¨å°±æ˜¯å‡çº§äº†è¿™ä¸ªThemeä½¿ç”¨çš„<a href="https://fontawesome.com/">fontawesome</a>çš„ç‰ˆæœ¬ï¼Œä¸è¿‡å…¶å®åªéœ€è¦åœ¨å®˜ç½‘ä¸‹è½½ä¸€ä¸ªzipç„¶åæŠŠé‡Œé¢çš„ä¸œè¥¿å…¨éƒ¨è¦†ç›–åˆ°<code>~\themes\matery\source\libs\awesome</code>å°±å¯ä»¥äº†ã€‚ï¼ˆè¿™æ ·åšæ˜¯å› ä¸ºåªæœ‰æ–°ç‰ˆæ‰æ”¯æŒBç«™çš„å›¾æ ‡ï¼Œä¸è¿‡Giteeçš„å›¾æ ‡ä»ç„¶æœ¨æœ‰ï¼‰</p><p>æœ€åæ¯”è¾ƒé—æ†¾çš„æ˜¯ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘åœ¨â€œè§†é¢‘â€æ ä¸­åµŒå…¥è§†é¢‘å¤±è´¥äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯Bç«™åµŒå…¥è§†é¢‘å·²ç»å¤±æ•ˆäº†ã€‚</p><h1 id="04-Markdownå…¬å¼æµ‹è¯•"><a href="#04-Markdownå…¬å¼æµ‹è¯•" class="headerlink" title="04 Markdownå…¬å¼æµ‹è¯•"></a>04 Markdownå…¬å¼æµ‹è¯•</h1><p>$$ S_n = \sum_{i=1}^{n} a_i $$<br>$$ \int \cos(x) dx = \sin(x) $$</p><p>è¿™æ˜¯è¡Œå†…å…¬å¼ï¼š$\lim_{x\rightarrow 0} \frac{x}{\sin x} = 1$</p><p>ç»è¿‡æµ‹è¯•ï¼Œå…¬å¼å†…æ¢è¡Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰å¾—åˆ°æ”¯æŒã€‚</p><h1 id="05-åœ¨å¿™äº†ä¸€ä¸‹åˆä¹‹å"><a href="#05-åœ¨å¿™äº†ä¸€ä¸‹åˆä¹‹å" class="headerlink" title="05 åœ¨å¿™äº†ä¸€ä¸‹åˆä¹‹å"></a>05 åœ¨å¿™äº†ä¸€ä¸‹åˆä¹‹å</h1><p>æ€»ä¹‹åˆ°æ™šä¸Šçš„æ—¶å€™æˆ‘å°±å·²ç»å¼€å§‹å†™è¿™ç¯‡HelloBlogäº†ï¼Œè¿˜æ˜¯å¾ˆå…´å¥‹çš„ï¼Œæ¯•ç«Ÿä»æœªæœ‰è¿‡å†™å‰ç«¯çš„ç»å†ï¼Œç„¶åå‡ ä¹æ˜¯ä»é›¶å¼€å§‹å­¦ä¹ æ­å»ºï¼Œæ‰€ä»¥çœŸçš„éå¸¸æ„Ÿè°¢å¤§ä½¬ä»¬çš„å¸®åŠ©ã€‚å› æ­¤å¦‚æœæœ‰æœä¸€æ—¥ï¼Œæˆ‘ä¹Ÿæœ‰èƒ½åŠ›ä»¥åï¼Œä¹Ÿä¸€å®šä¼šå‘æŠŠçŸ¥è¯†åˆ†äº«å‡ºæ¥ï¼Œä¾›å¤§å®¶å­¦ä¹ å’Œå‚è€ƒã€‚</p><p>æ— é™è¿›æ­¥ï¼</p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
